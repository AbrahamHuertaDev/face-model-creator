webpackJsonp([0],{217:function(n,l){function t(n){return Promise.resolve().then(function(){throw new Error("Cannot find module '"+n+"'.")})}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=217},247:function(n,l){function t(n){return Promise.resolve().then(function(){throw new Error("Cannot find module '"+n+"'.")})}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=247},313:function(n,l,t){"use strict";function e(n){return d._28(0,[(n()(),d._9(0,0,null,null,2,"ion-nav",[],null,null,null,q.b,q.a)),d._23(6144,null,J.a,null,[$.a]),d._8(2,4374528,null,0,$.a,[[2,Y.a],[2,X.a],nn.a,ln.a,tn.a,d.j,d.u,d.z,d.i,en.l,an.a,[2,un.a],on.a,d.k],{root:[0,"root"]},null)],function(n,l){n(l,2,0,l.component.rootPage)},null)}function a(n){return d._28(0,[(n()(),d._9(0,0,null,null,8,"ion-item",[["class","item item-block"]],null,null,null,sn.b,sn.a)),d._8(1,1097728,null,3,fn.a,[dn.a,ln.a,d.j,d.z,[2,hn.a]],null,null),d._24(335544320,7,{contentLabel:0}),d._24(603979776,8,{_buttons:1}),d._24(603979776,9,{_icons:1}),d._8(5,16384,null,0,_n.a,[],null,null),(n()(),d._9(6,0,null,2,2,"span",[["color","primary"],["ion-text",""]],null,null,null,null,null)),d._8(7,16384,null,0,pn.a,[ln.a,d.j,d.z],{color:[0,"color"]},null),(n()(),d._26(-1,null,["Add two labels to start"]))],function(n,l){n(l,7,0,"primary")},null)}function u(n){return d._28(0,[(n()(),d._9(0,0,null,null,11,"ion-item",[["class","item item-block"]],null,null,null,sn.b,sn.a)),d._8(1,1097728,null,3,fn.a,[dn.a,ln.a,d.j,d.z,[2,hn.a]],null,null),d._24(335544320,10,{contentLabel:0}),d._24(603979776,11,{_buttons:1}),d._24(603979776,12,{_icons:1}),d._8(5,16384,null,0,_n.a,[],null,null),(n()(),d._9(6,0,null,2,5,"span",[["color","primary"],["ion-text",""]],null,null,null,null,null)),d._8(7,16384,null,0,pn.a,[ln.a,d.j,d.z],{color:[0,"color"]},null),(n()(),d._26(-1,null,[" Click "])),(n()(),d._9(9,0,null,null,1,"ion-icon",[["name","camera"],["role","img"]],[[2,"hide",null]],null,null,null,null)),d._8(10,147456,null,0,gn.a,[ln.a,d.j,d.z],{name:[0,"name"]},null),(n()(),d._26(-1,null,[" to take a picture of the blue squared face "]))],function(n,l){n(l,7,0,"primary");n(l,10,0,"camera")},function(n,l){n(l,9,0,d._19(l,10)._hidden)})}function i(n){return d._28(0,[(n()(),d._9(0,0,null,null,12,"ion-item",[["class","item item-block"]],null,null,null,sn.b,sn.a)),d._8(1,1097728,null,3,fn.a,[dn.a,ln.a,d.j,d.z,[2,hn.a]],null,null),d._24(335544320,13,{contentLabel:0}),d._24(603979776,14,{_buttons:1}),d._24(603979776,15,{_icons:1}),d._8(5,16384,null,0,_n.a,[],null,null),(n()(),d._9(6,0,null,0,3,"button",[["ion-button",""],["item-left",""]],null,[[null,"click"]],function(n,l,t){var e=!0;if("click"===l){e=!1!==n.component.onAddPicture(n.context.$implicit)&&e}return e},bn.b,bn.a)),d._8(7,1097728,[[14,4]],0,mn.a,[[8,""],ln.a,d.j,d.z],null,null),(n()(),d._9(8,0,null,0,1,"ion-icon",[["name","camera"],["role","img"]],[[2,"hide",null]],null,null,null,null)),d._8(9,147456,null,0,gn.a,[ln.a,d.j,d.z],{name:[0,"name"]},null),(n()(),d._26(10,2,[" "," "])),(n()(),d._9(11,0,null,4,1,"span",[["item-right",""]],null,null,null,null,null)),(n()(),d._26(12,null,[""," pictures"]))],function(n,l){n(l,9,0,"camera")},function(n,l){var t=l.component;n(l,8,0,d._19(l,9)._hidden);n(l,10,0,l.context.$implicit);n(l,12,0,t.faceRecognizer.imageStore.data[l.context.$implicit].length)})}function o(n){return d._28(0,[(n()(),d._9(0,0,null,null,8,"ion-item",[["class","item item-block"]],null,null,null,sn.b,sn.a)),d._8(1,1097728,null,3,fn.a,[dn.a,ln.a,d.j,d.z,[2,hn.a]],null,null),d._24(335544320,16,{contentLabel:0}),d._24(603979776,17,{_buttons:1}),d._24(603979776,18,{_icons:1}),d._8(5,16384,null,0,_n.a,[],null,null),(n()(),d._9(6,0,null,2,2,"span",[["color","danger"],["ion-text",""]],null,null,null,null,null)),d._8(7,16384,null,0,pn.a,[ln.a,d.j,d.z],{color:[0,"color"]},null),(n()(),d._26(-1,null,["You must add at least 2 labels"]))],function(n,l){n(l,7,0,"danger")},null)}function r(n){return d._28(0,[(n()(),d._9(0,0,null,null,20,"ion-card",[],null,null,null,null,null)),d._8(1,16384,null,0,vn.a,[ln.a,d.j,d.z],null,null),(n()(),d._9(2,0,null,null,18,"ion-card-content",[],null,null,null,null,null)),d._8(3,16384,null,0,yn.a,[ln.a,d.j,d.z],null,null),(n()(),d._9(4,0,null,null,8,"ion-item",[["class","item item-block"]],null,null,null,sn.b,sn.a)),d._8(5,1097728,null,3,fn.a,[dn.a,ln.a,d.j,d.z,[2,hn.a]],null,null),d._24(335544320,19,{contentLabel:0}),d._24(603979776,20,{_buttons:1}),d._24(603979776,21,{_icons:1}),d._8(9,16384,null,0,_n.a,[],null,null),(n()(),d._9(10,0,null,2,2,"span",[["color","primary"],["ion-text",""]],null,null,null,null,null)),d._8(11,16384,null,0,pn.a,[ln.a,d.j,d.z],{color:[0,"color"]},null),(n()(),d._26(-1,null,["Training"])),(n()(),d._9(13,0,null,null,7,"ion-item",[["class","item item-block"]],null,null,null,sn.b,sn.a)),d._8(14,1097728,null,3,fn.a,[dn.a,ln.a,d.j,d.z,[2,hn.a]],null,null),d._24(335544320,22,{contentLabel:0}),d._24(603979776,23,{_buttons:1}),d._24(603979776,24,{_icons:1}),d._8(18,16384,null,0,_n.a,[],null,null),(n()(),d._26(19,2,["Loss: ",""])),d._22(20,2)],function(n,l){n(l,11,0,"primary")},function(n,l){var t=l.component;n(l,19,0,d._27(l,19,0,n(l,20,0,d._19(l.parent,0),t.faceRecognizer.imageClassifier.loss,"1.2-7")))})}function c(n){return d._28(0,[(n()(),d._9(0,0,null,null,2,"button",[["color","secondary"],["full",""],["ion-button",""],["margin-top",""]],null,[[null,"click"]],function(n,l,t){var e=!0;if("click"===l){e=!1!==n.component.onExportModel()&&e}return e},bn.b,bn.a)),d._8(1,1097728,null,0,mn.a,[[8,""],ln.a,d.j,d.z],{color:[0,"color"],full:[1,"full"]},null),(n()(),d._26(-1,0,["Export Model"]))],function(n,l){n(l,1,0,"secondary","")},null)}function s(n){return d._28(0,[d._20(0,wn.d,[d.r]),d._24(402653184,1,{video:0}),d._24(402653184,2,{canvas:0}),d._24(402653184,3,{faceCanvas:0}),(n()(),d._9(4,0,null,null,165,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,Cn.b,Cn.a)),d._8(5,4374528,null,0,zn.a,[ln.a,tn.a,on.a,d.j,d.z,nn.a,jn.a,d.u,[2,Y.a],[2,X.a]],null,null),(n()(),d._9(6,0,null,1,1,"a",[["class","github-link"],["href","https://github.com/albertobeiz/face-model-creator"]],null,null,null,null,null)),(n()(),d._9(7,0,null,null,0,"img",[["alt","Fork me on GitHub"],["src","https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"],["style","position: absolute; top: 0; right: 0; border: 0; z-index: 15;"]],null,null,null,null,null)),(n()(),d._9(8,0,null,1,4,"ion-toolbar",[["class","toolbar"],["color","primary"]],[[2,"statusbar-padding",null]],null,null,kn.b,kn.a)),d._8(9,49152,null,0,In.a,[ln.a,d.j,d.z],{color:[0,"color"]},null),(n()(),d._9(10,0,null,3,2,"ion-title",[["text-center",""]],null,null,null,xn.b,xn.a)),d._8(11,49152,null,0,Mn.a,[ln.a,d.j,d.z,[2,In.a],[2,Dn.a]],null,null),(n()(),d._26(-1,0,["Face Model Creator"])),(n()(),d._9(13,0,null,1,156,"ion-grid",[["class","grid"]],null,null,null,null,null)),d._8(14,16384,null,0,En.a,[],null,null),(n()(),d._9(15,0,null,null,6,"ion-row",[["class","row"]],null,null,null,null,null)),d._8(16,16384,null,0,Fn.a,[],null,null),(n()(),d._9(17,0,null,null,4,"ion-card",[],null,null,null,null,null)),d._8(18,16384,null,0,vn.a,[ln.a,d.j,d.z],null,null),(n()(),d._9(19,0,null,null,2,"ion-card-content",[["style","color: orange"],["text-center",""]],null,null,null,null,null)),d._8(20,16384,null,0,yn.a,[ln.a,d.j,d.z],null,null),(n()(),d._26(-1,null,[" This demo uses extremely experimental APIs. It can (and will) crash for multiple reasons. "])),(n()(),d._9(22,0,null,null,147,"ion-row",[["class","row"]],null,null,null,null,null)),d._8(23,16384,null,0,Fn.a,[],null,null),(n()(),d._9(24,0,null,null,8,"ion-col",[["class","col"],["col-12",""],["col-md-8",""]],null,null,null,null,null)),d._8(25,16384,null,0,Sn.a,[],null,null),(n()(),d._9(26,0,null,null,6,"ion-card",[],null,null,null,null,null)),d._8(27,16384,null,0,vn.a,[ln.a,d.j,d.z],null,null),(n()(),d._9(28,0,null,null,4,"ion-card-content",[],null,null,null,null,null)),d._8(29,16384,null,0,yn.a,[ln.a,d.j,d.z],null,null),(n()(),d._9(30,0,null,null,2,"div",[["class","video-container"]],null,null,null,null,null)),(n()(),d._9(31,0,[[1,0],["video",1]],null,0,"video",[["autoplay",""],["id","video"]],null,null,null,null,null)),(n()(),d._9(32,0,[[2,0],["canvas",1]],null,0,"canvas",[["id","canvas"]],null,null,null,null,null)),(n()(),d._9(33,0,null,null,136,"ion-col",[["class","col"],["col-12",""],["col-md-4",""]],null,null,null,null,null)),d._8(34,16384,null,0,Sn.a,[],null,null),(n()(),d._9(35,0,null,null,18,"ion-card",[],null,null,null,null,null)),d._8(36,16384,null,0,vn.a,[ln.a,d.j,d.z],null,null),(n()(),d._9(37,0,null,null,16,"ion-card-content",[],null,null,null,null,null)),d._8(38,16384,null,0,yn.a,[ln.a,d.j,d.z],null,null),(n()(),d._9(39,0,null,null,14,"ion-item",[["class","item item-block"]],null,null,null,sn.b,sn.a)),d._8(40,1097728,null,3,fn.a,[dn.a,ln.a,d.j,d.z,[2,hn.a]],null,null),d._24(335544320,4,{contentLabel:0}),d._24(603979776,5,{_buttons:1}),d._24(603979776,6,{_icons:1}),d._8(44,16384,null,0,_n.a,[],null,null),(n()(),d._9(45,0,null,3,4,"ion-input",[["placeholder","New Label"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(n,l,t){var e=!0;if("ngModelChange"===l){e=!1!==(n.component.labelToAdd=t)&&e}return e},Rn.b,Rn.a)),d._8(46,671744,null,0,Tn.h,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),d._23(2048,null,Tn.f,null,[Tn.h]),d._8(48,16384,null,0,Tn.g,[[4,Tn.f]],null,null),d._8(49,5423104,null,0,Pn.a,[ln.a,tn.a,dn.a,nn.a,d.j,d.z,[2,zn.a],[2,fn.a],[2,Tn.f],on.a],{placeholder:[0,"placeholder"]},null),(n()(),d._9(50,0,null,4,3,"button",[["ion-button",""],["item-right",""]],null,[[null,"click"]],function(n,l,t){var e=!0,a=n.component;if("click"===l){e=!1!==a.onAddLabel(a.labelToAdd)&&e}return e},bn.b,bn.a)),d._8(51,1097728,[[5,4]],0,mn.a,[[8,""],ln.a,d.j,d.z],null,null),(n()(),d._9(52,0,null,0,1,"ion-icon",[["name","add"],["role","img"]],[[2,"hide",null]],null,null,null,null)),d._8(53,147456,null,0,gn.a,[ln.a,d.j,d.z],{name:[0,"name"]},null),(n()(),d._9(54,0,null,null,11,"ion-card",[],null,null,null,null,null)),d._8(55,16384,null,0,vn.a,[ln.a,d.j,d.z],null,null),(n()(),d._9(56,0,null,null,9,"ion-card-content",[],null,null,null,null,null)),d._8(57,16384,null,0,yn.a,[ln.a,d.j,d.z],null,null),(n()(),d._0(16777216,null,null,1,null,a)),d._8(59,16384,null,0,wn.j,[d.I,d.F],{ngIf:[0,"ngIf"]},null),(n()(),d._0(16777216,null,null,1,null,u)),d._8(61,16384,null,0,wn.j,[d.I,d.F],{ngIf:[0,"ngIf"]},null),(n()(),d._0(16777216,null,null,1,null,i)),d._8(63,802816,null,0,wn.i,[d.I,d.F,d.p],{ngForOf:[0,"ngForOf"]},null),(n()(),d._0(16777216,null,null,1,null,o)),d._8(65,16384,null,0,wn.j,[d.I,d.F],{ngIf:[0,"ngIf"]},null),(n()(),d._0(16777216,null,null,1,null,r)),d._8(67,16384,null,0,wn.j,[d.I,d.F],{ngIf:[0,"ngIf"]},null),(n()(),d._9(68,0,null,null,64,"ion-card",[["class","model-params"]],null,null,null,null,null)),d._8(69,16384,null,0,vn.a,[ln.a,d.j,d.z],null,null),(n()(),d._9(70,0,null,null,62,"ion-card-content",[],null,null,null,null,null)),d._8(71,16384,null,0,yn.a,[ln.a,d.j,d.z],null,null),(n()(),d._9(72,0,null,null,13,"ion-item",[["class","item item-block"]],null,null,null,sn.b,sn.a)),d._8(73,1097728,null,3,fn.a,[dn.a,ln.a,d.j,d.z,[2,hn.a]],null,null),d._24(335544320,25,{contentLabel:0}),d._24(603979776,26,{_buttons:1}),d._24(603979776,27,{_icons:1}),d._8(77,16384,null,0,_n.a,[],null,null),(n()(),d._9(78,0,null,1,2,"ion-label",[["no-margin",""]],null,null,null,null,null)),d._8(79,16384,[[25,4]],0,Ln.a,[ln.a,d.j,d.z,[8,null],[8,null],[8,null],[8,null]],null,null),(n()(),d._26(-1,null,["Learning Rate"])),(n()(),d._9(81,0,null,3,4,"ion-input",[["step","0.00001"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(n,l,t){var e=!0;if("ngModelChange"===l){e=!1!==(n.component.faceRecognizer.imageClassifier.learningRate=t)&&e}return e},Rn.b,Rn.a)),d._8(82,671744,null,0,Tn.h,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),d._23(2048,null,Tn.f,null,[Tn.h]),d._8(84,16384,null,0,Tn.g,[[4,Tn.f]],null,null),d._8(85,5423104,null,0,Pn.a,[ln.a,tn.a,dn.a,nn.a,d.j,d.z,[2,zn.a],[2,fn.a],[2,Tn.f],on.a],{type:[0,"type"],step:[1,"step"]},null),(n()(),d._9(86,0,null,null,13,"ion-item",[["class","item item-block"]],null,null,null,sn.b,sn.a)),d._8(87,1097728,null,3,fn.a,[dn.a,ln.a,d.j,d.z,[2,hn.a]],null,null),d._24(335544320,28,{contentLabel:0}),d._24(603979776,29,{_buttons:1}),d._24(603979776,30,{_icons:1}),d._8(91,16384,null,0,_n.a,[],null,null),(n()(),d._9(92,0,null,1,2,"ion-label",[["no-margin",""]],null,null,null,null,null)),d._8(93,16384,[[28,4]],0,Ln.a,[ln.a,d.j,d.z,[8,null],[8,null],[8,null],[8,null]],null,null),(n()(),d._26(-1,null,["Hidden Units"])),(n()(),d._9(95,0,null,3,4,"ion-input",[["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(n,l,t){var e=!0;if("ngModelChange"===l){e=!1!==(n.component.faceRecognizer.imageClassifier.hiddenUnits=t)&&e}return e},Rn.b,Rn.a)),d._8(96,671744,null,0,Tn.h,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),d._23(2048,null,Tn.f,null,[Tn.h]),d._8(98,16384,null,0,Tn.g,[[4,Tn.f]],null,null),d._8(99,5423104,null,0,Pn.a,[ln.a,tn.a,dn.a,nn.a,d.j,d.z,[2,zn.a],[2,fn.a],[2,Tn.f],on.a],{type:[0,"type"]},null),(n()(),d._9(100,0,null,null,13,"ion-item",[["class","item item-block"]],null,null,null,sn.b,sn.a)),d._8(101,1097728,null,3,fn.a,[dn.a,ln.a,d.j,d.z,[2,hn.a]],null,null),d._24(335544320,31,{contentLabel:0}),d._24(603979776,32,{_buttons:1}),d._24(603979776,33,{_icons:1}),d._8(105,16384,null,0,_n.a,[],null,null),(n()(),d._9(106,0,null,1,2,"ion-label",[["no-margin",""]],null,null,null,null,null)),d._8(107,16384,[[31,4]],0,Ln.a,[ln.a,d.j,d.z,[8,null],[8,null],[8,null],[8,null]],null,null),(n()(),d._26(-1,null,["Batch Size"])),(n()(),d._9(109,0,null,3,4,"ion-input",[["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(n,l,t){var e=!0;if("ngModelChange"===l){e=!1!==(n.component.faceRecognizer.imageClassifier.batchSize=t)&&e}return e},Rn.b,Rn.a)),d._8(110,671744,null,0,Tn.h,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),d._23(2048,null,Tn.f,null,[Tn.h]),d._8(112,16384,null,0,Tn.g,[[4,Tn.f]],null,null),d._8(113,5423104,null,0,Pn.a,[ln.a,tn.a,dn.a,nn.a,d.j,d.z,[2,zn.a],[2,fn.a],[2,Tn.f],on.a],{type:[0,"type"]},null),(n()(),d._9(114,0,null,null,13,"ion-item",[["class","item item-block"]],null,null,null,sn.b,sn.a)),d._8(115,1097728,null,3,fn.a,[dn.a,ln.a,d.j,d.z,[2,hn.a]],null,null),d._24(335544320,34,{contentLabel:0}),d._24(603979776,35,{_buttons:1}),d._24(603979776,36,{_icons:1}),d._8(119,16384,null,0,_n.a,[],null,null),(n()(),d._9(120,0,null,1,2,"ion-label",[["no-margin",""]],null,null,null,null,null)),d._8(121,16384,[[34,4]],0,Ln.a,[ln.a,d.j,d.z,[8,null],[8,null],[8,null],[8,null]],null,null),(n()(),d._26(-1,null,["Epochs"])),(n()(),d._9(123,0,null,3,4,"ion-input",[["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(n,l,t){var e=!0;if("ngModelChange"===l){e=!1!==(n.component.faceRecognizer.imageClassifier.epochs=t)&&e}return e},Rn.b,Rn.a)),d._8(124,671744,null,0,Tn.h,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),d._23(2048,null,Tn.f,null,[Tn.h]),d._8(126,16384,null,0,Tn.g,[[4,Tn.f]],null,null),d._8(127,5423104,null,0,Pn.a,[ln.a,tn.a,dn.a,nn.a,d.j,d.z,[2,zn.a],[2,fn.a],[2,Tn.f],on.a],{type:[0,"type"]},null),(n()(),d._9(128,0,null,null,2,"button",[["full",""],["ion-button",""],["margin-top",""]],[[8,"disabled",0]],[[null,"click"]],function(n,l,t){var e=!0;if("click"===l){e=!1!==n.component.onTrainModel()&&e}return e},bn.b,bn.a)),d._8(129,1097728,null,0,mn.a,[[8,""],ln.a,d.j,d.z],{full:[0,"full"]},null),(n()(),d._26(-1,0,["Train Model"])),(n()(),d._0(16777216,null,null,1,null,c)),d._8(132,16384,null,0,wn.j,[d.I,d.F],{ngIf:[0,"ngIf"]},null),(n()(),d._9(133,0,null,null,36,"ion-card",[],null,null,null,null,null)),d._8(134,16384,null,0,vn.a,[ln.a,d.j,d.z],null,null),(n()(),d._9(135,0,null,null,34,"ion-card-content",[],null,null,null,null,null)),d._8(136,16384,null,0,yn.a,[ln.a,d.j,d.z],null,null),(n()(),d._9(137,0,null,null,8,"ion-item",[["class","item item-block"]],null,null,null,sn.b,sn.a)),d._8(138,1097728,null,3,fn.a,[dn.a,ln.a,d.j,d.z,[2,hn.a]],null,null),d._24(335544320,37,{contentLabel:0}),d._24(603979776,38,{_buttons:1}),d._24(603979776,39,{_icons:1}),d._8(142,16384,null,0,_n.a,[],null,null),(n()(),d._9(143,0,null,1,2,"ion-label",[["no-margin",""]],null,null,null,null,null)),d._8(144,16384,[[37,4]],0,Ln.a,[ln.a,d.j,d.z,[8,null],[8,null],[8,null],[8,null]],null,null),(n()(),d._26(-1,null,["Model JSON"])),(n()(),d._9(146,0,null,null,0,"input",[["id","json-upload"],["padding-left",""],["placeholder","Model JSON"],["type","file"]],null,null,null,null,null)),(n()(),d._9(147,0,null,null,8,"ion-item",[["class","item item-block"]],null,null,null,sn.b,sn.a)),d._8(148,1097728,null,3,fn.a,[dn.a,ln.a,d.j,d.z,[2,hn.a]],null,null),d._24(335544320,40,{contentLabel:0}),d._24(603979776,41,{_buttons:1}),d._24(603979776,42,{_icons:1}),d._8(152,16384,null,0,_n.a,[],null,null),(n()(),d._9(153,0,null,1,2,"ion-label",[["margin-top",""],["no-margin",""]],null,null,null,null,null)),d._8(154,16384,[[40,4]],0,Ln.a,[ln.a,d.j,d.z,[8,null],[8,null],[8,null],[8,null]],null,null),(n()(),d._26(-1,null,["Model Weights"])),(n()(),d._9(156,0,null,null,0,"input",[["id","weights-upload"],["padding-left",""],["placeholder","Model Weights"],["type","file"]],null,null,null,null,null)),(n()(),d._9(157,0,null,null,8,"ion-item",[["class","item item-block"]],null,null,null,sn.b,sn.a)),d._8(158,1097728,null,3,fn.a,[dn.a,ln.a,d.j,d.z,[2,hn.a]],null,null),d._24(335544320,43,{contentLabel:0}),d._24(603979776,44,{_buttons:1}),d._24(603979776,45,{_icons:1}),d._8(162,16384,null,0,_n.a,[],null,null),(n()(),d._9(163,0,null,1,2,"ion-label",[["margin-top",""],["no-margin",""]],null,null,null,null,null)),d._8(164,16384,[[43,4]],0,Ln.a,[ln.a,d.j,d.z,[8,null],[8,null],[8,null],[8,null]],null,null),(n()(),d._26(-1,null,["Model Data"])),(n()(),d._9(166,0,null,null,0,"input",[["id","data-upload"],["padding-left",""],["placeholder","Model Data"],["type","file"]],null,null,null,null,null)),(n()(),d._9(167,0,null,null,2,"button",[["full",""],["ion-button",""],["margin-top",""]],null,[[null,"click"]],function(n,l,t){var e=!0;if("click"===l){e=!1!==n.component.onImportModel()&&e}return e},bn.b,bn.a)),d._8(168,1097728,null,0,mn.a,[[8,""],ln.a,d.j,d.z],{full:[0,"full"]},null),(n()(),d._26(-1,0,["Import Model"])),(n()(),d._9(170,0,[[3,0],["faceCanvas",1]],null,0,"canvas",[["height","224"],["hidden",""],["id","face-canvas"],["width","224"]],null,null,null,null,null))],function(n,l){var t=l.component;n(l,9,0,"primary");n(l,46,0,t.labelToAdd);n(l,49,0,"New Label");n(l,53,0,"add");n(l,59,0,0===t.objectKeys(t.faceRecognizer.imageStore.data).length);n(l,61,0,t.objectKeys(t.faceRecognizer.imageStore.data).length>0);n(l,63,0,t.objectKeys(t.faceRecognizer.imageStore.data));n(l,65,0,1===t.objectKeys(t.faceRecognizer.imageStore.data).length);n(l,67,0,t.faceRecognizer.imageClassifier.loss);n(l,82,0,t.faceRecognizer.imageClassifier.learningRate);n(l,85,0,"number","0.00001");n(l,96,0,t.faceRecognizer.imageClassifier.hiddenUnits);n(l,99,0,"number");n(l,110,0,t.faceRecognizer.imageClassifier.batchSize);n(l,113,0,"number");n(l,124,0,t.faceRecognizer.imageClassifier.epochs);n(l,127,0,"number");n(l,129,0,"");n(l,132,0,t.faceRecognizer.imageClassifier.headModel);n(l,168,0,"")},function(n,l){var t=l.component;n(l,4,0,d._19(l,5).statusbarPadding,d._19(l,5)._hasRefresher);n(l,8,0,d._19(l,9)._sbPadding);n(l,45,0,d._19(l,48).ngClassUntouched,d._19(l,48).ngClassTouched,d._19(l,48).ngClassPristine,d._19(l,48).ngClassDirty,d._19(l,48).ngClassValid,d._19(l,48).ngClassInvalid,d._19(l,48).ngClassPending);n(l,52,0,d._19(l,53)._hidden);n(l,81,0,d._19(l,84).ngClassUntouched,d._19(l,84).ngClassTouched,d._19(l,84).ngClassPristine,d._19(l,84).ngClassDirty,d._19(l,84).ngClassValid,d._19(l,84).ngClassInvalid,d._19(l,84).ngClassPending);n(l,95,0,d._19(l,98).ngClassUntouched,d._19(l,98).ngClassTouched,d._19(l,98).ngClassPristine,d._19(l,98).ngClassDirty,d._19(l,98).ngClassValid,d._19(l,98).ngClassInvalid,d._19(l,98).ngClassPending);n(l,109,0,d._19(l,112).ngClassUntouched,d._19(l,112).ngClassTouched,d._19(l,112).ngClassPristine,d._19(l,112).ngClassDirty,d._19(l,112).ngClassValid,d._19(l,112).ngClassInvalid,d._19(l,112).ngClassPending);n(l,123,0,d._19(l,126).ngClassUntouched,d._19(l,126).ngClassTouched,d._19(l,126).ngClassPristine,d._19(l,126).ngClassDirty,d._19(l,126).ngClassValid,d._19(l,126).ngClassInvalid,d._19(l,126).ngClassPending);n(l,128,0,t.faceRecognizer.imageClassifier.isTraining||t.objectKeys(t.faceRecognizer.imageStore.data).length<2)})}Object.defineProperty(l,"__esModule",{value:!0});var f=t(60),d=t(1),h=(t(0),t(218),t(125)),_=t(126),p=this&&this.__awaiter||function(n,l,t,e){return new(t||(t=Promise))(function(a,u){function i(n){try{r(e.next(n))}catch(n){u(n)}}function o(n){try{r(e.throw(n))}catch(n){u(n)}}function r(n){n.done?a(n.value):new t(function(l){l(n.value)}).then(i,o)}r((e=e.apply(n,l||[])).next())})},g=this&&this.__generator||function(n,l){function t(t){return function(i){return function(t){if(e)throw new TypeError("Generator is already executing.");for(;o;)try{if(e=1,a&&(u=a[2&t[0]?"return":t[0]?"throw":"next"])&&!(u=u.call(a,t[1])).done)return u;switch(a=0,u&&(t=[0,u.value]),t[0]){case 0:case 1:u=t;break;case 4:return o.label++,{value:t[1],done:!1};case 5:o.label++,a=t[1],t=[0];continue;case 7:t=o.ops.pop(),o.trys.pop();continue;default:if(u=o.trys,!(u=u.length>0&&u[u.length-1])&&(6===t[0]||2===t[0])){o=0;continue}if(3===t[0]&&(!u||t[1]>u[0]&&t[1]<u[3])){o.label=t[1];break}if(6===t[0]&&o.label<u[1]){o.label=u[1],u=t;break}if(u&&o.label<u[2]){o.label=u[2],o.ops.push(t);break}u[2]&&o.ops.pop(),o.trys.pop();continue}t=l.call(n,o)}catch(n){t=[6,n],a=0}finally{e=u=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,i])}}var e,a,u,i,o={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return i={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i},b=function(){function n(){}return n.prototype.init=function(){this.faceDetector=new window.FaceDetector({fastMode:!0})},n.prototype.detect=function(n){return p(this,void 0,void 0,function(){var l;return g(this,function(t){switch(t.label){case 0:return[4,this.faceDetector.detect(n)];case 1:return l=t.sent(),[2,l.map(function(n){return n.boundingBox})]}})})},n.ngInjectableDef=d.M({factory:function(){return new n},token:n,providedIn:"root"}),n}(),m=(t(322),t(323),this&&this.__awaiter||function(n,l,t,e){return new(t||(t=Promise))(function(a,u){function i(n){try{r(e.next(n))}catch(n){u(n)}}function o(n){try{r(e.throw(n))}catch(n){u(n)}}function r(n){n.done?a(n.value):new t(function(l){l(n.value)}).then(i,o)}r((e=e.apply(n,l||[])).next())})}),v=this&&this.__generator||function(n,l){function t(t){return function(i){return function(t){if(e)throw new TypeError("Generator is already executing.");for(;o;)try{if(e=1,a&&(u=a[2&t[0]?"return":t[0]?"throw":"next"])&&!(u=u.call(a,t[1])).done)return u;switch(a=0,u&&(t=[0,u.value]),t[0]){case 0:case 1:u=t;break;case 4:return o.label++,{value:t[1],done:!1};case 5:o.label++,a=t[1],t=[0];continue;case 7:t=o.ops.pop(),o.trys.pop();continue;default:if(u=o.trys,!(u=u.length>0&&u[u.length-1])&&(6===t[0]||2===t[0])){o=0;continue}if(3===t[0]&&(!u||t[1]>u[0]&&t[1]<u[3])){o.label=t[1];break}if(6===t[0]&&o.label<u[1]){o.label=u[1],u=t;break}if(u&&o.label<u[2]){o.label=u[2],o.ops.push(t);break}u[2]&&o.ops.pop(),o.trys.pop();continue}t=l.call(n,o)}catch(n){t=[6,n],a=0}finally{e=u=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,i])}}var e,a,u,i,o={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return i={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i},y=function(){function n(){this.faces=[]}return n.prototype.init=function(){this.tracker=new tracking.ObjectTracker(["face"]),this.tracker.setInitialScale(4),this.tracker.setStepSize(2),this.tracker.setEdgesDensity(.1)},n.prototype.detect=function(n){return m(this,void 0,void 0,function(){return v(this,function(l){return this.isTracking||this.startTracking(n),[2,this.faces]})})},n.prototype.startTracking=function(n){var l=this;this.isTracking=!0,tracking.track(n,this.tracker,{camera:!0}),this.tracker.on("track",function(n){l.faces=n.data})},n.ngInjectableDef=d.M({factory:function(){return new n},token:n,providedIn:"root"}),n}(),w=t(324),C=this&&this.__awaiter||function(n,l,t,e){return new(t||(t=Promise))(function(a,u){function i(n){try{r(e.next(n))}catch(n){u(n)}}function o(n){try{r(e.throw(n))}catch(n){u(n)}}function r(n){n.done?a(n.value):new t(function(l){l(n.value)}).then(i,o)}r((e=e.apply(n,l||[])).next())})},z=this&&this.__generator||function(n,l){function t(t){return function(i){return function(t){if(e)throw new TypeError("Generator is already executing.");for(;o;)try{if(e=1,a&&(u=a[2&t[0]?"return":t[0]?"throw":"next"])&&!(u=u.call(a,t[1])).done)return u;switch(a=0,u&&(t=[0,u.value]),t[0]){case 0:case 1:u=t;break;case 4:return o.label++,{value:t[1],done:!1};case 5:o.label++,a=t[1],t=[0];continue;case 7:t=o.ops.pop(),o.trys.pop();continue;default:if(u=o.trys,!(u=u.length>0&&u[u.length-1])&&(6===t[0]||2===t[0])){o=0;continue}if(3===t[0]&&(!u||t[1]>u[0]&&t[1]<u[3])){o.label=t[1];break}if(6===t[0]&&o.label<u[1]){o.label=u[1],u=t;break}if(u&&o.label<u[2]){o.label=u[2],o.ops.push(t);break}u[2]&&o.ops.pop(),o.trys.pop();continue}t=l.call(n,o)}catch(n){t=[6,n],a=0}finally{e=u=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,i])}}var e,a,u,i,o={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return i={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i},j=function(){function n(){this.learningRate=1e-5,this.hiddenUnits=100,this.epochs=20,this.batchSize=10,this.loss=0,this.init()}return n.prototype.init=function(){return C(this,void 0,void 0,function(){var n;return z(this,function(l){switch(l.label){case 0:return n=this,[4,this.loadMobilenet()];case 1:return n.mobilenet=l.sent(),[2]}})})},n.prototype.loadMobilenet=function(){return C(this,void 0,void 0,function(){var n,l;return z(this,function(t){switch(t.label){case 0:return[4,w.e("https://storage.googleapis.com/tfjs-models/tfjs/mobilenet_v1_0.25_224/model.json")];case 1:return n=t.sent(),l=n.getLayer("conv_pw_13_relu"),[2,w.f({inputs:n.inputs,outputs:l.output})]}})})},n.prototype.predictMobilenet=function(n){var l=this.imageDataToTensor(n);return this.mobilenet.predict(l)},n.prototype.imageDataToTensor=function(n){return w.l(function(){return w.a(n).expandDims(0).toFloat().div(w.i(127)).sub(w.i(1))})},n.prototype.trainModel=function(n){var l=this;this.isTraining=!0;var t=this.dataToDataset(n);this.labels=t.labels;var e=this.createHeadModel(this.labels.length),a=w.m.adam(this.learningRate);e.compile({optimizer:a,loss:"categoricalCrossentropy"});return e.fit(t.xs,t.ys,{batchSize:this.batchSize,epochs:this.epochs,callbacks:{onBatchEnd:function(n,t){return C(l,void 0,void 0,function(){return z(this,function(n){switch(n.label){case 0:return this.loss=t.loss,[4,w.g()];case 1:return n.sent(),[2]}})})},onTrainEnd:function(){l.headModel=e,l.isTraining=!1}}})},n.prototype.dataToDataset=function(n){var l,t,e=this,a=Object.keys(n);return a.forEach(function(u,i){n[u].forEach(function(n){var u=w.l(function(){return w.h(w.k([i]).toInt(),a.length)}),o=e.predictMobilenet(n);if(l){var r=l;l=w.c(r.concat(u,0));var c=t;t=w.c(c.concat(o,0)),r.dispose(),c.dispose()}else l=w.c(u),t=w.c(o)})}),{labels:a,xs:t,ys:l}},n.prototype.createHeadModel=function(n){return w.j({layers:[w.d.flatten({inputShape:[7,7,256]}),w.d.dense({units:this.hiddenUnits,activation:"relu",kernelInitializer:"varianceScaling",useBias:!0}),w.d.dense({units:n,kernelInitializer:"varianceScaling",useBias:!1,activation:"softmax"})]})},n.prototype.loadHeadModel=function(n,l){return C(this,void 0,void 0,function(){var t;return z(this,function(e){switch(e.label){case 0:return t=this,[4,w.e(w.b.browserFiles([n,l]))];case 1:return t.headModel=e.sent(),[2]}})})},n.prototype.saveHeadModel=function(){this.headModel.save("downloads://model")},n.prototype.predict=function(n){return C(this,void 0,void 0,function(){var l,t,e,a;return z(this,function(u){switch(u.label){case 0:return this.headModel?(l=this.imageDataToTensor(n),t=this.mobilenet.predict(l),e=this.headModel.predict(t),[4,e.as1D().argMax().data()]):[2,"????"];case 1:return a=u.sent(),[2,this.labels[a[0]]]}})})},n.ngInjectableDef=d.M({factory:function(){return new n},token:n,providedIn:"root"}),n}(),k=function(){function n(){this.data={}}return n.prototype.hasLabel=function(n){return void 0!==this.data[n]},n.prototype.addLabel=function(n){if(!n||this.data[n])throw new Error("Label "+n+" already exists");this.data[n]=[]},n.prototype.getLabels=function(){return Object.keys(this.data)},n.prototype.storeImage=function(n,l,t){this.data[n].push({imageData:l,b64:t})},n.prototype.getDataAsImageData=function(){var n=this;return Object.keys(this.data).reduce(function(l,t){return l[t]=n.data[t].map(function(n){return n.imageData}),l},{})},n.ngInjectableDef=d.M({factory:function(){return new n},token:n,providedIn:"root"}),n}(),I=t(369),x=t(422),M=this&&this.__awaiter||function(n,l,t,e){return new(t||(t=Promise))(function(a,u){function i(n){try{r(e.next(n))}catch(n){u(n)}}function o(n){try{r(e.throw(n))}catch(n){u(n)}}function r(n){n.done?a(n.value):new t(function(l){l(n.value)}).then(i,o)}r((e=e.apply(n,l||[])).next())})},D=this&&this.__generator||function(n,l){function t(t){return function(i){return function(t){if(e)throw new TypeError("Generator is already executing.");for(;o;)try{if(e=1,a&&(u=a[2&t[0]?"return":t[0]?"throw":"next"])&&!(u=u.call(a,t[1])).done)return u;switch(a=0,u&&(t=[0,u.value]),t[0]){case 0:case 1:u=t;break;case 4:return o.label++,{value:t[1],done:!1};case 5:o.label++,a=t[1],t=[0];continue;case 7:t=o.ops.pop(),o.trys.pop();continue;default:if(u=o.trys,!(u=u.length>0&&u[u.length-1])&&(6===t[0]||2===t[0])){o=0;continue}if(3===t[0]&&(!u||t[1]>u[0]&&t[1]<u[3])){o.label=t[1];break}if(6===t[0]&&o.label<u[1]){o.label=u[1],u=t;break}if(u&&o.label<u[2]){o.label=u[2],o.ops.push(t);break}u[2]&&o.ops.pop(),o.trys.pop();continue}t=l.call(n,o)}catch(n){t=[6,n],a=0}finally{e=u=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,i])}}var e,a,u,i,o={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return i={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i},E=function(){function n(){}return n.prototype.downloadDataAsZIP=function(n){return M(this,void 0,void 0,function(){var l,t;return D(this,function(e){switch(e.label){case 0:return l=new I,Object.keys(n).forEach(function(t){var e=l.folder(t);n[t].forEach(function(n,l){e.file(t+"-"+l+".jpeg",n.b64,{base64:!0})})}),[4,l.generateAsync({type:"blob"})];case 1:return t=e.sent(),Object(x.saveAs)(t,"model-data.zip"),[2]}})})},n.prototype.loadDataFromZIP=function(n){return M(this,void 0,void 0,function(){var l,t,e,a,u,i,o,r,c;return D(this,function(s){switch(s.label){case 0:return[4,I.loadAsync(n)];case 1:l=s.sent(),t={},a=0,u=Object.keys(l.files),s.label=2;case 2:return a<u.length?"jpeg"!==(i=u[a]).split(".").pop()?(e=i.replace("/",""),t[e]=[],[3,5]):(o=l.files[i],[4,o.async("base64")]):[3,6];case 3:return r=s.sent(),[4,this.b64ToImageData(r)];case 4:c=s.sent(),t[e].push({imageData:c,base64:r}),s.label=5;case 5:return a++,[3,2];case 6:return[2,t]}})})},n.prototype.b64ToImageData=function(n){return new Promise(function(l){var t=new Image;t.onload=function(){var n=document.createElement("canvas");n.width=t.width,n.height=t.height;var e=n.getContext("2d");e.drawImage(t,0,0);var a=e.getImageData(0,0,n.width,n.height);l(a)},t.src="data:image/jpeg;base64,"+n})},n.ngInjectableDef=d.M({factory:function(){return new n},token:n,providedIn:"root"}),n}(),F=this&&this.__awaiter||function(n,l,t,e){return new(t||(t=Promise))(function(a,u){function i(n){try{r(e.next(n))}catch(n){u(n)}}function o(n){try{r(e.throw(n))}catch(n){u(n)}}function r(n){n.done?a(n.value):new t(function(l){l(n.value)}).then(i,o)}r((e=e.apply(n,l||[])).next())})},S=this&&this.__generator||function(n,l){function t(t){return function(i){return function(t){if(e)throw new TypeError("Generator is already executing.");for(;o;)try{if(e=1,a&&(u=a[2&t[0]?"return":t[0]?"throw":"next"])&&!(u=u.call(a,t[1])).done)return u;switch(a=0,u&&(t=[0,u.value]),t[0]){case 0:case 1:u=t;break;case 4:return o.label++,{value:t[1],done:!1};case 5:o.label++,a=t[1],t=[0];continue;case 7:t=o.ops.pop(),o.trys.pop();continue;default:if(u=o.trys,!(u=u.length>0&&u[u.length-1])&&(6===t[0]||2===t[0])){o=0;continue}if(3===t[0]&&(!u||t[1]>u[0]&&t[1]<u[3])){o.label=t[1];break}if(6===t[0]&&o.label<u[1]){o.label=u[1],u=t;break}if(u&&o.label<u[2]){o.label=u[2],o.ops.push(t);break}u[2]&&o.ops.pop(),o.trys.pop();continue}t=l.call(n,o)}catch(n){t=[6,n],a=0}finally{e=u=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,i])}}var e,a,u,i,o={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return i={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i},R=function(){function n(n,l,t,e,a){this.imageClassifier=t,this.imageStore=e,this.imageLoader=a;try{n.init(),this.faceDetector=n}catch(n){l.init(),this.faceDetector=l}}return n.prototype.detectFaces=function(n){return F(this,void 0,void 0,function(){var l;return S(this,function(t){switch(t.label){case 0:return[4,this.faceDetector.detect(n)];case 1:return l=t.sent(),[2,l]}})})},n.prototype.addLabel=function(n){n&&!this.imageStore.hasLabel(n)&&this.imageStore.addLabel(n)},n.prototype.storeImage=function(n,l,t){var e=t.split(",").pop();this.imageStore.storeImage(n,l,e)},n.prototype.predict=function(n){return F(this,void 0,void 0,function(){return S(this,function(l){switch(l.label){case 0:return[4,this.imageClassifier.predict(n)];case 1:return[2,l.sent()]}})})},n.prototype.trainModel=function(){return this.imageClassifier.trainModel(this.imageStore.getDataAsImageData())},n.prototype.saveModel=function(){this.imageClassifier.saveHeadModel()},n.prototype.loadModel=function(n,l){return F(this,void 0,void 0,function(){return S(this,function(t){return this.imageClassifier.labels=Object.keys(this.imageStore.data),this.imageClassifier.loadHeadModel(n,l),[2]})})},n.prototype.loadDataFromZIP=function(n){return F(this,void 0,void 0,function(){var l;return S(this,function(t){switch(t.label){case 0:return l=this.imageStore,[4,this.imageLoader.loadDataFromZIP(n)];case 1:return l.data=t.sent(),[2]}})})},n.prototype.downloadDataAsZIP=function(){this.imageLoader.downloadDataAsZIP(this.imageStore.data)},n.ngInjectableDef=d.M({factory:function(){return new n(d.Q(b),d.Q(y),d.Q(j),d.Q(k),d.Q(E))},token:n,providedIn:"root"}),n}(),T=this&&this.__awaiter||function(n,l,t,e){return new(t||(t=Promise))(function(a,u){function i(n){try{r(e.next(n))}catch(n){u(n)}}function o(n){try{r(e.throw(n))}catch(n){u(n)}}function r(n){n.done?a(n.value):new t(function(l){l(n.value)}).then(i,o)}r((e=e.apply(n,l||[])).next())})},P=this&&this.__generator||function(n,l){function t(t){return function(i){return function(t){if(e)throw new TypeError("Generator is already executing.");for(;o;)try{if(e=1,a&&(u=a[2&t[0]?"return":t[0]?"throw":"next"])&&!(u=u.call(a,t[1])).done)return u;switch(a=0,u&&(t=[0,u.value]),t[0]){case 0:case 1:u=t;break;case 4:return o.label++,{value:t[1],done:!1};case 5:o.label++,a=t[1],t=[0];continue;case 7:t=o.ops.pop(),o.trys.pop();continue;default:if(u=o.trys,!(u=u.length>0&&u[u.length-1])&&(6===t[0]||2===t[0])){o=0;continue}if(3===t[0]&&(!u||t[1]>u[0]&&t[1]<u[3])){o.label=t[1];break}if(6===t[0]&&o.label<u[1]){o.label=u[1],u=t;break}if(u&&o.label<u[2]){o.label=u[2],o.ops.push(t);break}u[2]&&o.ops.pop(),o.trys.pop();continue}t=l.call(n,o)}catch(n){t=[6,n],a=0}finally{e=u=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,i])}}var e,a,u,i,o={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return i={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i},L=function(){function n(n){this.faceRecognizer=n,this.objectKeys=Object.keys}return n.prototype.ionViewDidEnter=function(){return T(this,void 0,void 0,function(){var n=this;return P(this,function(l){switch(l.label){case 0:return this.videoElement=this.video.nativeElement,this.canvasElement=this.canvas.nativeElement,this.faceCanvasElement=this.faceCanvas.nativeElement,this.faceCanvasContext=this.faceCanvasElement.getContext("2d"),[4,this.startWebcam()];case 1:return l.sent(),[4,this.startFaceDetection()];case 2:return l.sent(),window.onresize=function(){return n.resizeCanvas()},[2]}})})},n.prototype.startWebcam=function(){var n=this;return new Promise(function(l,t){return function(l,t){navigator.getUserMedia({video:!0},function(t){n.videoElement.srcObject=t,n.videoElement.onloadeddata=function(){n.resizeCanvas(),l()}},function(n){return t(n)})}(l,t)})},n.prototype.startFaceDetection=function(){var n=this;this.faceDetectionInterval=setInterval(function(){return T(n,void 0,void 0,function(){var n,l=this;return P(this,function(t){switch(t.label){case 0:return[4,this.faceRecognizer.detectFaces(this.videoElement)];case 1:return n=t.sent(),this.firstFace=n[0],this.clearCanvas(),n.forEach(function(n,t){return T(l,void 0,void 0,function(){return P(this,function(l){switch(l.label){case 0:return[4,this.drawFace(n,t)];case 1:return[2,l.sent()]}})})}),[2]}})})},100)},n.prototype.clearCanvas=function(){this.canvasContext.clearRect(0,0,this.canvasElement.width,this.canvasElement.height)},n.prototype.drawFace=function(n,l){return T(this,void 0,void 0,function(){var t,e,a;return P(this,function(u){switch(u.label){case 0:return this.drawInFaceCanvas(this.firstFace),t=this.getFaceCanvasImageData(),e=0===l?"#0000FF":"#00FF00",[4,this.faceRecognizer.predict(t)];case 1:return a=u.sent(),this.drawFaceRectangle(n,a,e),[2]}})})},n.prototype.drawFaceRectangle=function(n,l,t){var e=n.width,a=n.height,u=n.x,i=n.y;this.canvasContext.strokeStyle=t,this.canvasContext.fillStyle=t,this.canvasContext.font="14px Arial",this.canvasContext.lineWidth=2,this.canvasContext.strokeRect(u,i,e,a),this.canvasContext.fillText(l,u+5,i-10)},n.prototype.resizeCanvas=function(){this.canvasElement.width=this.videoElement.videoWidth,this.canvasElement.height=this.videoElement.videoHeight,this.canvasElement.style.width=this.videoElement.clientWidth+"px",this.canvasElement.style.height=this.videoElement.clientHeight+"px",this.canvasContext=this.canvasElement.getContext("2d")},n.prototype.onAddLabel=function(n){this.faceRecognizer.addLabel(n),this.labelToAdd=""},n.prototype.onAddPicture=function(n){if(this.firstFace){this.drawInFaceCanvas(this.firstFace);var l=this.getFaceCanvasImageData(),t=this.getFaceCanvasDataURL();this.faceRecognizer.storeImage(n,l,t)}},n.prototype.drawInFaceCanvas=function(n){this.faceCanvasContext.drawImage(this.videoElement,n.x,n.y,n.width,n.height,0,0,this.faceCanvasElement.width,this.faceCanvasElement.height)},n.prototype.getFaceCanvasImageData=function(){return this.faceCanvasContext.getImageData(0,0,this.faceCanvasElement.width,this.faceCanvasElement.height)},n.prototype.getFaceCanvasDataURL=function(){return this.faceCanvasElement.toDataURL("image/jpeg")},n.prototype.onTrainModel=function(){return T(this,void 0,void 0,function(){return P(this,function(n){switch(n.label){case 0:return clearInterval(this.faceDetectionInterval),[4,this.faceRecognizer.trainModel()];case 1:return n.sent(),this.startFaceDetection(),[2]}})})},n.prototype.onExportModel=function(){return T(this,void 0,void 0,function(){return P(this,function(n){switch(n.label){case 0:return[4,this.faceRecognizer.saveModel()];case 1:return n.sent(),this.faceRecognizer.downloadDataAsZIP(),[2]}})})},n.prototype.onImportModel=function(){return T(this,void 0,void 0,function(){var n,l,t;return P(this,function(e){switch(e.label){case 0:return n=document.getElementById("json-upload"),l=document.getElementById("weights-upload"),t=document.getElementById("data-upload"),[4,this.faceRecognizer.loadDataFromZIP(t.files[0])];case 1:return e.sent(),[4,this.faceRecognizer.loadModel(n.files[0],l.files[0])];case 2:return e.sent(),[2]}})})},n}(),A=function(){return function(n,l,t){this.rootPage=L,n.ready().then(function(){l.styleDefault(),t.hide()})}}(),O=function(){return function(){}}(),U=t(89),H=t(423),B=t(424),G=t(425),W=t(426),Z=t(427),V=t(428),K=t(429),N=t(430),Q=t(431),q=t(432),J=t(63),$=t(93),Y=t(8),X=t(39),nn=t(15),ln=t(2),tn=t(5),en=t(12),an=t(53),un=t(26),on=t(16),rn=d._7({encapsulation:2,styles:[],data:{}}),cn=d._5("ng-component",A,function(n){return d._28(0,[(n()(),d._9(0,0,null,null,1,"ng-component",[],null,null,null,e,rn)),d._8(1,49152,null,0,A,[tn.a,_.a,h.a],null,null)],null,null)},{},{},[]),sn=t(312),fn=t(28),dn=t(23),hn=t(76),_n=t(114),pn=t(174),gn=t(74),bn=t(70),mn=t(33),vn=t(150),yn=t(151),wn=t(21),Cn=t(433),zn=t(40),jn=t(55),kn=t(434),In=t(65),xn=t(435),Mn=t(124),Dn=t(64),En=t(154),Fn=t(155),Sn=t(153),Rn=t(436),Tn=t(27),Pn=t(113),Ln=t(75),An=d._7({encapsulation:2,styles:[],data:{}}),On=d._5("page-home",L,function(n){return d._28(0,[(n()(),d._9(0,0,null,null,1,"page-home",[],null,null,null,s,An)),d._8(1,49152,null,0,L,[R],null,null)],null,null)},{},{},[]),Un=t(182),Hn=t(147),Bn=t(149),Gn=t(179),Wn=t(56),Zn=t(159),Vn=t(272),Kn=t(91),Nn=t(77),Qn=t(161),qn=t(110),Jn=t(166),$n=t(178),Yn=t(173),Xn=t(271),nl=t(180),ll=t(51),tl=t(160),el=t(181),al=d._6(O,[U.b],function(n){return d._16([d._17(512,d.i,d.V,[[8,[H.a,B.a,G.a,W.a,Z.a,V.a,K.a,N.a,Q.a,cn,On]],[3,d.i],d.s]),d._17(5120,d.r,d._4,[[3,d.r]]),d._17(4608,wn.l,wn.k,[d.r,[2,wn.u]]),d._17(5120,d.b,d._1,[]),d._17(5120,d.p,d._2,[]),d._17(5120,d.q,d._3,[]),d._17(4608,f.c,f.q,[wn.c]),d._17(6144,d.D,null,[f.c]),d._17(4608,f.f,Un.a,[]),d._17(5120,f.d,function(n,l,t,e,a,u,i){return[new f.k(n,l,t),new f.o(e),new f.n(a,u,i)]},[wn.c,d.u,[2,d.w],wn.c,wn.c,f.f,d.W]),d._17(4608,f.e,f.e,[f.d,d.u]),d._17(135680,f.m,f.m,[wn.c]),d._17(4608,f.l,f.l,[f.e,f.m]),d._17(6144,d.B,null,[f.l]),d._17(6144,f.p,null,[f.m]),d._17(4608,d.G,d.G,[d.u]),d._17(4608,f.h,f.h,[wn.c]),d._17(4608,f.i,f.i,[wn.c]),d._17(4608,Tn.k,Tn.k,[]),d._17(4608,Tn.c,Tn.c,[]),d._17(4608,Hn.a,Hn.a,[nn.a,ln.a]),d._17(4608,Bn.a,Bn.a,[nn.a,ln.a]),d._17(4608,Gn.a,Gn.a,[]),d._17(4608,dn.a,dn.a,[]),d._17(4608,Wn.a,Wn.a,[tn.a]),d._17(4608,jn.a,jn.a,[ln.a,tn.a,d.u,on.a]),d._17(4608,Zn.a,Zn.a,[nn.a,ln.a]),d._17(5120,wn.g,Vn.b,[wn.r,[2,wn.a],ln.a]),d._17(4608,wn.f,wn.f,[wn.g]),d._17(5120,Kn.b,Kn.d,[nn.a,Kn.a]),d._17(5120,un.a,un.b,[nn.a,Kn.b,wn.f,Nn.b,d.i]),d._17(4608,Qn.a,Qn.a,[nn.a,ln.a,un.a]),d._17(4608,qn.a,qn.a,[nn.a,ln.a]),d._17(4608,Jn.a,Jn.a,[nn.a,ln.a,un.a]),d._17(4608,$n.a,$n.a,[ln.a,tn.a,on.a,nn.a,en.l]),d._17(4608,Yn.a,Yn.a,[nn.a,ln.a]),d._17(4608,an.a,an.a,[tn.a,ln.a]),d._17(4608,_.a,_.a,[]),d._17(4608,h.a,h.a,[]),d._17(1073742336,wn.b,wn.b,[]),d._17(512,d.k,Xn.a,[]),d._17(256,ln.b,{},[]),d._17(1024,nl.a,nl.b,[]),d._17(1024,tn.a,tn.b,[f.b,nl.a,d.u]),d._17(1024,ln.a,ln.c,[ln.b,tn.a]),d._17(512,on.a,on.a,[tn.a]),d._17(512,ll.a,ll.a,[]),d._17(512,nn.a,nn.a,[ln.a,tn.a,[2,ll.a]]),d._17(512,en.l,en.l,[nn.a]),d._17(256,Kn.a,{links:[]},[]),d._17(512,d.h,d.h,[]),d._17(512,tl.a,tl.a,[d.h]),d._17(1024,Nn.b,Nn.c,[tl.a,d.o]),d._17(1024,d.c,function(n,l,t,e,a,u,i,o,r,c,s,d,h){return[f.r(n),el.a(l),Gn.b(t,e),$n.b(a,u,i,o,r),Nn.d(c,s,d,h)]},[[2,d.t],ln.a,tn.a,on.a,ln.a,tn.a,on.a,nn.a,en.l,ln.a,Kn.a,Nn.b,d.u]),d._17(512,d.d,d.d,[[2,d.c]]),d._17(131584,d.f,d.f,[d.u,d.W,d.o,d.k,d.i,d.d]),d._17(1073742336,d.e,d.e,[d.f]),d._17(1073742336,f.a,f.a,[[3,f.a]]),d._17(1073742336,Tn.j,Tn.j,[]),d._17(1073742336,Tn.d,Tn.d,[]),d._17(1073742336,Tn.i,Tn.i,[]),d._17(1073742336,Vn.a,Vn.a,[]),d._17(1073742336,O,O,[]),d._17(256,d.U,!0,[]),d._17(256,U.a,A,[]),d._17(256,wn.a,"/",[])])});Object(d.N)(),Object(f.j)().bootstrapModuleFactory(al)},334:function(n,l){},374:function(n,l){},376:function(n,l){}},[313]);