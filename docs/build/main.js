webpackJsonp([0],{218:function(n,l){function t(n){return Promise.resolve().then(function(){throw new Error("Cannot find module '"+n+"'.")})}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=218},247:function(n,l){function t(n){return Promise.resolve().then(function(){throw new Error("Cannot find module '"+n+"'.")})}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=247},313:function(n,l,t){"use strict";function e(n){return _._28(0,[(n()(),_._9(0,0,null,null,2,"ion-nav",[],null,null,null,$.b,$.a)),_._23(6144,null,Y.a,null,[X.a]),_._8(2,4374528,null,0,X.a,[[2,nn.a],[2,ln.a],tn.a,en.a,an.a,_.j,_.u,_.z,_.i,un.l,on.a,[2,rn.a],cn.a,_.k],{root:[0,"root"]},null)],function(n,l){n(l,2,0,l.component.rootPage)},null)}function a(n){return _._28(0,[(n()(),_._9(0,0,null,null,8,"ion-item",[["class","item item-block"]],null,null,null,dn.b,dn.a)),_._8(1,1097728,null,3,hn.a,[_n.a,en.a,_.j,_.z,[2,pn.a]],null,null),_._24(335544320,7,{contentLabel:0}),_._24(603979776,8,{_buttons:1}),_._24(603979776,9,{_icons:1}),_._8(5,16384,null,0,gn.a,[],null,null),(n()(),_._9(6,0,null,2,2,"span",[["color","primary"],["ion-text",""]],null,null,null,null,null)),_._8(7,16384,null,0,bn.a,[en.a,_.j,_.z],{color:[0,"color"]},null),(n()(),_._26(-1,null,["Add two labels to start"]))],function(n,l){n(l,7,0,"primary")},null)}function u(n){return _._28(0,[(n()(),_._9(0,0,null,null,11,"ion-item",[["class","item item-block"]],null,null,null,dn.b,dn.a)),_._8(1,1097728,null,3,hn.a,[_n.a,en.a,_.j,_.z,[2,pn.a]],null,null),_._24(335544320,10,{contentLabel:0}),_._24(603979776,11,{_buttons:1}),_._24(603979776,12,{_icons:1}),_._8(5,16384,null,0,gn.a,[],null,null),(n()(),_._9(6,0,null,2,5,"span",[["color","primary"],["ion-text",""]],null,null,null,null,null)),_._8(7,16384,null,0,bn.a,[en.a,_.j,_.z],{color:[0,"color"]},null),(n()(),_._26(-1,null,[" Click "])),(n()(),_._9(9,0,null,null,1,"ion-icon",[["name","camera"],["role","img"]],[[2,"hide",null]],null,null,null,null)),_._8(10,147456,null,0,mn.a,[en.a,_.j,_.z],{name:[0,"name"]},null),(n()(),_._26(-1,null,[" to take a picture of the blue squared face "]))],function(n,l){n(l,7,0,"primary");n(l,10,0,"camera")},function(n,l){n(l,9,0,_._19(l,10)._hidden)})}function o(n){return _._28(0,[(n()(),_._9(0,0,null,null,12,"ion-item",[["class","item item-block"]],null,null,null,dn.b,dn.a)),_._8(1,1097728,null,3,hn.a,[_n.a,en.a,_.j,_.z,[2,pn.a]],null,null),_._24(335544320,13,{contentLabel:0}),_._24(603979776,14,{_buttons:1}),_._24(603979776,15,{_icons:1}),_._8(5,16384,null,0,gn.a,[],null,null),(n()(),_._9(6,0,null,0,3,"button",[["ion-button",""],["item-left",""]],null,[[null,"click"]],function(n,l,t){var e=!0;if("click"===l){e=!1!==n.component.onAddPicture(n.context.$implicit)&&e}return e},vn.b,vn.a)),_._8(7,1097728,[[14,4]],0,yn.a,[[8,""],en.a,_.j,_.z],null,null),(n()(),_._9(8,0,null,0,1,"ion-icon",[["name","camera"],["role","img"]],[[2,"hide",null]],null,null,null,null)),_._8(9,147456,null,0,mn.a,[en.a,_.j,_.z],{name:[0,"name"]},null),(n()(),_._26(10,2,[" "," "])),(n()(),_._9(11,0,null,4,1,"span",[["item-right",""]],null,null,null,null,null)),(n()(),_._26(12,null,[""," pictures"]))],function(n,l){n(l,9,0,"camera")},function(n,l){var t=l.component;n(l,8,0,_._19(l,9)._hidden);n(l,10,0,l.context.$implicit);n(l,12,0,t.faceRecognizer.imageStore.data[l.context.$implicit].length)})}function i(n){return _._28(0,[(n()(),_._9(0,0,null,null,8,"ion-item",[["class","item item-block"]],null,null,null,dn.b,dn.a)),_._8(1,1097728,null,3,hn.a,[_n.a,en.a,_.j,_.z,[2,pn.a]],null,null),_._24(335544320,16,{contentLabel:0}),_._24(603979776,17,{_buttons:1}),_._24(603979776,18,{_icons:1}),_._8(5,16384,null,0,gn.a,[],null,null),(n()(),_._9(6,0,null,2,2,"span",[["color","danger"],["ion-text",""]],null,null,null,null,null)),_._8(7,16384,null,0,bn.a,[en.a,_.j,_.z],{color:[0,"color"]},null),(n()(),_._26(-1,null,["You must add at least 2 labels"]))],function(n,l){n(l,7,0,"danger")},null)}function r(n){return _._28(0,[(n()(),_._9(0,0,null,null,2,"button",[["full",""],["ion-button",""],["margin-top",""]],null,[[null,"click"]],function(n,l,t){var e=!0;if("click"===l){e=!1!==n.component.onExportData()&&e}return e},vn.b,vn.a)),_._8(1,1097728,null,0,yn.a,[[8,""],en.a,_.j,_.z],{full:[0,"full"]},null),(n()(),_._26(-1,0,[" Export Data "]))],function(n,l){n(l,1,0,"")},null)}function c(n){return _._28(0,[(n()(),_._9(0,0,null,null,16,"ion-card",[],null,null,null,null,null)),_._8(1,16384,null,0,wn.a,[en.a,_.j,_.z],null,null),(n()(),_._9(2,0,null,null,14,"ion-card-content",[],null,null,null,null,null)),_._8(3,16384,null,0,Cn.a,[en.a,_.j,_.z],null,null),(n()(),_._9(4,0,null,null,8,"ion-item",[["class","item item-block"]],null,null,null,dn.b,dn.a)),_._8(5,1097728,null,3,hn.a,[_n.a,en.a,_.j,_.z,[2,pn.a]],null,null),_._24(335544320,19,{contentLabel:0}),_._24(603979776,20,{_buttons:1}),_._24(603979776,21,{_icons:1}),_._8(9,16384,null,0,gn.a,[],null,null),(n()(),_._9(10,0,null,1,2,"ion-label",[["margin-top",""],["no-margin",""]],null,null,null,null,null)),_._8(11,16384,[[19,4]],0,zn.a,[en.a,_.j,_.z,[8,null],[8,null],[8,null],[8,null]],null,null),(n()(),_._26(-1,null,["Import Data"])),(n()(),_._9(13,0,null,null,0,"input",[["id","data-import"],["padding-left",""],["placeholder","Model Data"],["type","file"]],null,null,null,null,null)),(n()(),_._9(14,0,null,null,2,"button",[["full",""],["ion-button",""],["margin-top",""]],null,[[null,"click"]],function(n,l,t){var e=!0;if("click"===l){e=!1!==n.component.onImportData()&&e}return e},vn.b,vn.a)),_._8(15,1097728,null,0,yn.a,[[8,""],en.a,_.j,_.z],{full:[0,"full"]},null),(n()(),_._26(-1,0,["Import Data"]))],function(n,l){n(l,15,0,"")},null)}function s(n){return _._28(0,[(n()(),_._9(0,0,null,null,20,"ion-card",[],null,null,null,null,null)),_._8(1,16384,null,0,wn.a,[en.a,_.j,_.z],null,null),(n()(),_._9(2,0,null,null,18,"ion-card-content",[],null,null,null,null,null)),_._8(3,16384,null,0,Cn.a,[en.a,_.j,_.z],null,null),(n()(),_._9(4,0,null,null,8,"ion-item",[["class","item item-block"]],null,null,null,dn.b,dn.a)),_._8(5,1097728,null,3,hn.a,[_n.a,en.a,_.j,_.z,[2,pn.a]],null,null),_._24(335544320,22,{contentLabel:0}),_._24(603979776,23,{_buttons:1}),_._24(603979776,24,{_icons:1}),_._8(9,16384,null,0,gn.a,[],null,null),(n()(),_._9(10,0,null,2,2,"span",[["color","primary"],["ion-text",""]],null,null,null,null,null)),_._8(11,16384,null,0,bn.a,[en.a,_.j,_.z],{color:[0,"color"]},null),(n()(),_._26(-1,null,["Training"])),(n()(),_._9(13,0,null,null,7,"ion-item",[["class","item item-block"]],null,null,null,dn.b,dn.a)),_._8(14,1097728,null,3,hn.a,[_n.a,en.a,_.j,_.z,[2,pn.a]],null,null),_._24(335544320,25,{contentLabel:0}),_._24(603979776,26,{_buttons:1}),_._24(603979776,27,{_icons:1}),_._8(18,16384,null,0,gn.a,[],null,null),(n()(),_._26(19,2,["Loss: ",""])),_._22(20,2)],function(n,l){n(l,11,0,"primary")},function(n,l){var t=l.component;n(l,19,0,_._27(l,19,0,n(l,20,0,_._19(l.parent,0),t.faceRecognizer.imageClassifier.loss,"1.2-7")))})}function f(n){return _._28(0,[(n()(),_._9(0,0,null,null,2,"button",[["color","secondary"],["full",""],["ion-button",""],["margin-top",""]],null,[[null,"click"]],function(n,l,t){var e=!0;if("click"===l){e=!1!==n.component.onExportModel()&&e}return e},vn.b,vn.a)),_._8(1,1097728,null,0,yn.a,[[8,""],en.a,_.j,_.z],{color:[0,"color"],full:[1,"full"]},null),(n()(),_._26(-1,0,["Export Model"]))],function(n,l){n(l,1,0,"secondary","")},null)}function d(n){return _._28(0,[_._20(0,jn.d,[_.r]),_._24(402653184,1,{video:0}),_._24(402653184,2,{canvas:0}),_._24(402653184,3,{faceCanvas:0}),(n()(),_._9(4,0,null,null,169,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,kn.b,kn.a)),_._8(5,4374528,null,0,In.a,[en.a,an.a,cn.a,_.j,_.z,tn.a,xn.a,_.u,[2,nn.a],[2,ln.a]],null,null),(n()(),_._9(6,0,null,1,1,"a",[["class","github-link"],["href","https://github.com/albertobeiz/face-model-creator"]],null,null,null,null,null)),(n()(),_._9(7,0,null,null,0,"img",[["alt","Fork me on GitHub"],["src","https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"],["style","position: absolute; top: 0; right: 0; border: 0; z-index: 15;"]],null,null,null,null,null)),(n()(),_._9(8,0,null,1,4,"ion-toolbar",[["class","toolbar"],["color","primary"]],[[2,"statusbar-padding",null]],null,null,Dn.b,Dn.a)),_._8(9,49152,null,0,Mn.a,[en.a,_.j,_.z],{color:[0,"color"]},null),(n()(),_._9(10,0,null,3,2,"ion-title",[["text-center",""]],null,null,null,En.b,En.a)),_._8(11,49152,null,0,Fn.a,[en.a,_.j,_.z,[2,Mn.a],[2,Rn.a]],null,null),(n()(),_._26(-1,0,["Face Model Creator"])),(n()(),_._9(13,0,null,1,160,"ion-grid",[["class","grid"]],null,null,null,null,null)),_._8(14,16384,null,0,Sn.a,[],null,null),(n()(),_._9(15,0,null,null,6,"ion-row",[["class","row"]],null,null,null,null,null)),_._8(16,16384,null,0,Tn.a,[],null,null),(n()(),_._9(17,0,null,null,4,"ion-card",[],null,null,null,null,null)),_._8(18,16384,null,0,wn.a,[en.a,_.j,_.z],null,null),(n()(),_._9(19,0,null,null,2,"ion-card-content",[["style","color: orange; user-select: text"],["text-center",""]],null,null,null,null,null)),_._8(20,16384,null,0,Cn.a,[en.a,_.j,_.z],null,null),(n()(),_._26(-1,null,[" For better (way better) face detection use Google Chrome and activate chrome://flags#enable-experimental-web-platform-features. "])),(n()(),_._9(22,0,null,null,151,"ion-row",[["class","row"]],null,null,null,null,null)),_._8(23,16384,null,0,Tn.a,[],null,null),(n()(),_._9(24,0,null,null,8,"ion-col",[["class","col"],["col-12",""],["col-md-8",""]],null,null,null,null,null)),_._8(25,16384,null,0,Pn.a,[],null,null),(n()(),_._9(26,0,null,null,6,"ion-card",[],null,null,null,null,null)),_._8(27,16384,null,0,wn.a,[en.a,_.j,_.z],null,null),(n()(),_._9(28,0,null,null,4,"ion-card-content",[],null,null,null,null,null)),_._8(29,16384,null,0,Cn.a,[en.a,_.j,_.z],null,null),(n()(),_._9(30,0,null,null,2,"div",[["class","video-container"]],null,null,null,null,null)),(n()(),_._9(31,0,[[1,0],["video",1]],null,0,"video",[["autoplay",""],["id","video"]],null,null,null,null,null)),(n()(),_._9(32,0,[[2,0],["canvas",1]],null,0,"canvas",[["id","canvas"]],null,null,null,null,null)),(n()(),_._9(33,0,null,null,140,"ion-col",[["class","col"],["col-12",""],["col-md-4",""]],null,null,null,null,null)),_._8(34,16384,null,0,Pn.a,[],null,null),(n()(),_._9(35,0,null,null,18,"ion-card",[],null,null,null,null,null)),_._8(36,16384,null,0,wn.a,[en.a,_.j,_.z],null,null),(n()(),_._9(37,0,null,null,16,"ion-card-content",[],null,null,null,null,null)),_._8(38,16384,null,0,Cn.a,[en.a,_.j,_.z],null,null),(n()(),_._9(39,0,null,null,14,"ion-item",[["class","item item-block"]],null,null,null,dn.b,dn.a)),_._8(40,1097728,null,3,hn.a,[_n.a,en.a,_.j,_.z,[2,pn.a]],null,null),_._24(335544320,4,{contentLabel:0}),_._24(603979776,5,{_buttons:1}),_._24(603979776,6,{_icons:1}),_._8(44,16384,null,0,gn.a,[],null,null),(n()(),_._9(45,0,null,3,4,"ion-input",[["placeholder","New Label"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(n,l,t){var e=!0;if("ngModelChange"===l){e=!1!==(n.component.labelToAdd=t)&&e}return e},Ln.b,Ln.a)),_._8(46,671744,null,0,An.h,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),_._23(2048,null,An.f,null,[An.h]),_._8(48,16384,null,0,An.g,[[4,An.f]],null,null),_._8(49,5423104,null,0,On.a,[en.a,an.a,_n.a,tn.a,_.j,_.z,[2,In.a],[2,hn.a],[2,An.f],cn.a],{placeholder:[0,"placeholder"]},null),(n()(),_._9(50,0,null,4,3,"button",[["ion-button",""],["item-right",""]],null,[[null,"click"]],function(n,l,t){var e=!0,a=n.component;if("click"===l){e=!1!==a.onAddLabel(a.labelToAdd)&&e}return e},vn.b,vn.a)),_._8(51,1097728,[[5,4]],0,yn.a,[[8,""],en.a,_.j,_.z],null,null),(n()(),_._9(52,0,null,0,1,"ion-icon",[["name","add"],["role","img"]],[[2,"hide",null]],null,null,null,null)),_._8(53,147456,null,0,mn.a,[en.a,_.j,_.z],{name:[0,"name"]},null),(n()(),_._9(54,0,null,null,13,"ion-card",[],null,null,null,null,null)),_._8(55,16384,null,0,wn.a,[en.a,_.j,_.z],null,null),(n()(),_._9(56,0,null,null,11,"ion-card-content",[],null,null,null,null,null)),_._8(57,16384,null,0,Cn.a,[en.a,_.j,_.z],null,null),(n()(),_._0(16777216,null,null,1,null,a)),_._8(59,16384,null,0,jn.j,[_.I,_.F],{ngIf:[0,"ngIf"]},null),(n()(),_._0(16777216,null,null,1,null,u)),_._8(61,16384,null,0,jn.j,[_.I,_.F],{ngIf:[0,"ngIf"]},null),(n()(),_._0(16777216,null,null,1,null,o)),_._8(63,802816,null,0,jn.i,[_.I,_.F,_.p],{ngForOf:[0,"ngForOf"]},null),(n()(),_._0(16777216,null,null,1,null,i)),_._8(65,16384,null,0,jn.j,[_.I,_.F],{ngIf:[0,"ngIf"]},null),(n()(),_._0(16777216,null,null,1,null,r)),_._8(67,16384,null,0,jn.j,[_.I,_.F],{ngIf:[0,"ngIf"]},null),(n()(),_._0(16777216,null,null,1,null,c)),_._8(69,16384,null,0,jn.j,[_.I,_.F],{ngIf:[0,"ngIf"]},null),(n()(),_._0(16777216,null,null,1,null,s)),_._8(71,16384,null,0,jn.j,[_.I,_.F],{ngIf:[0,"ngIf"]},null),(n()(),_._9(72,0,null,null,64,"ion-card",[["class","model-params"]],null,null,null,null,null)),_._8(73,16384,null,0,wn.a,[en.a,_.j,_.z],null,null),(n()(),_._9(74,0,null,null,62,"ion-card-content",[],null,null,null,null,null)),_._8(75,16384,null,0,Cn.a,[en.a,_.j,_.z],null,null),(n()(),_._9(76,0,null,null,13,"ion-item",[["class","item item-block"]],null,null,null,dn.b,dn.a)),_._8(77,1097728,null,3,hn.a,[_n.a,en.a,_.j,_.z,[2,pn.a]],null,null),_._24(335544320,28,{contentLabel:0}),_._24(603979776,29,{_buttons:1}),_._24(603979776,30,{_icons:1}),_._8(81,16384,null,0,gn.a,[],null,null),(n()(),_._9(82,0,null,1,2,"ion-label",[["no-margin",""]],null,null,null,null,null)),_._8(83,16384,[[28,4]],0,zn.a,[en.a,_.j,_.z,[8,null],[8,null],[8,null],[8,null]],null,null),(n()(),_._26(-1,null,["Learning Rate"])),(n()(),_._9(85,0,null,3,4,"ion-input",[["step","0.00001"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(n,l,t){var e=!0;if("ngModelChange"===l){e=!1!==(n.component.faceRecognizer.imageClassifier.learningRate=t)&&e}return e},Ln.b,Ln.a)),_._8(86,671744,null,0,An.h,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),_._23(2048,null,An.f,null,[An.h]),_._8(88,16384,null,0,An.g,[[4,An.f]],null,null),_._8(89,5423104,null,0,On.a,[en.a,an.a,_n.a,tn.a,_.j,_.z,[2,In.a],[2,hn.a],[2,An.f],cn.a],{type:[0,"type"],step:[1,"step"]},null),(n()(),_._9(90,0,null,null,13,"ion-item",[["class","item item-block"]],null,null,null,dn.b,dn.a)),_._8(91,1097728,null,3,hn.a,[_n.a,en.a,_.j,_.z,[2,pn.a]],null,null),_._24(335544320,31,{contentLabel:0}),_._24(603979776,32,{_buttons:1}),_._24(603979776,33,{_icons:1}),_._8(95,16384,null,0,gn.a,[],null,null),(n()(),_._9(96,0,null,1,2,"ion-label",[["no-margin",""]],null,null,null,null,null)),_._8(97,16384,[[31,4]],0,zn.a,[en.a,_.j,_.z,[8,null],[8,null],[8,null],[8,null]],null,null),(n()(),_._26(-1,null,["Hidden Units"])),(n()(),_._9(99,0,null,3,4,"ion-input",[["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(n,l,t){var e=!0;if("ngModelChange"===l){e=!1!==(n.component.faceRecognizer.imageClassifier.hiddenUnits=t)&&e}return e},Ln.b,Ln.a)),_._8(100,671744,null,0,An.h,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),_._23(2048,null,An.f,null,[An.h]),_._8(102,16384,null,0,An.g,[[4,An.f]],null,null),_._8(103,5423104,null,0,On.a,[en.a,an.a,_n.a,tn.a,_.j,_.z,[2,In.a],[2,hn.a],[2,An.f],cn.a],{type:[0,"type"]},null),(n()(),_._9(104,0,null,null,13,"ion-item",[["class","item item-block"]],null,null,null,dn.b,dn.a)),_._8(105,1097728,null,3,hn.a,[_n.a,en.a,_.j,_.z,[2,pn.a]],null,null),_._24(335544320,34,{contentLabel:0}),_._24(603979776,35,{_buttons:1}),_._24(603979776,36,{_icons:1}),_._8(109,16384,null,0,gn.a,[],null,null),(n()(),_._9(110,0,null,1,2,"ion-label",[["no-margin",""]],null,null,null,null,null)),_._8(111,16384,[[34,4]],0,zn.a,[en.a,_.j,_.z,[8,null],[8,null],[8,null],[8,null]],null,null),(n()(),_._26(-1,null,["Batch Size"])),(n()(),_._9(113,0,null,3,4,"ion-input",[["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(n,l,t){var e=!0;if("ngModelChange"===l){e=!1!==(n.component.faceRecognizer.imageClassifier.batchSize=t)&&e}return e},Ln.b,Ln.a)),_._8(114,671744,null,0,An.h,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),_._23(2048,null,An.f,null,[An.h]),_._8(116,16384,null,0,An.g,[[4,An.f]],null,null),_._8(117,5423104,null,0,On.a,[en.a,an.a,_n.a,tn.a,_.j,_.z,[2,In.a],[2,hn.a],[2,An.f],cn.a],{type:[0,"type"]},null),(n()(),_._9(118,0,null,null,13,"ion-item",[["class","item item-block"]],null,null,null,dn.b,dn.a)),_._8(119,1097728,null,3,hn.a,[_n.a,en.a,_.j,_.z,[2,pn.a]],null,null),_._24(335544320,37,{contentLabel:0}),_._24(603979776,38,{_buttons:1}),_._24(603979776,39,{_icons:1}),_._8(123,16384,null,0,gn.a,[],null,null),(n()(),_._9(124,0,null,1,2,"ion-label",[["no-margin",""]],null,null,null,null,null)),_._8(125,16384,[[37,4]],0,zn.a,[en.a,_.j,_.z,[8,null],[8,null],[8,null],[8,null]],null,null),(n()(),_._26(-1,null,["Epochs"])),(n()(),_._9(127,0,null,3,4,"ion-input",[["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(n,l,t){var e=!0;if("ngModelChange"===l){e=!1!==(n.component.faceRecognizer.imageClassifier.epochs=t)&&e}return e},Ln.b,Ln.a)),_._8(128,671744,null,0,An.h,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),_._23(2048,null,An.f,null,[An.h]),_._8(130,16384,null,0,An.g,[[4,An.f]],null,null),_._8(131,5423104,null,0,On.a,[en.a,an.a,_n.a,tn.a,_.j,_.z,[2,In.a],[2,hn.a],[2,An.f],cn.a],{type:[0,"type"]},null),(n()(),_._9(132,0,null,null,2,"button",[["full",""],["ion-button",""],["margin-top",""]],[[8,"disabled",0]],[[null,"click"]],function(n,l,t){var e=!0;if("click"===l){e=!1!==n.component.onTrainModel()&&e}return e},vn.b,vn.a)),_._8(133,1097728,null,0,yn.a,[[8,""],en.a,_.j,_.z],{full:[0,"full"]},null),(n()(),_._26(-1,0,["Train Model"])),(n()(),_._0(16777216,null,null,1,null,f)),_._8(136,16384,null,0,jn.j,[_.I,_.F],{ngIf:[0,"ngIf"]},null),(n()(),_._9(137,0,null,null,36,"ion-card",[],null,null,null,null,null)),_._8(138,16384,null,0,wn.a,[en.a,_.j,_.z],null,null),(n()(),_._9(139,0,null,null,34,"ion-card-content",[],null,null,null,null,null)),_._8(140,16384,null,0,Cn.a,[en.a,_.j,_.z],null,null),(n()(),_._9(141,0,null,null,8,"ion-item",[["class","item item-block"]],null,null,null,dn.b,dn.a)),_._8(142,1097728,null,3,hn.a,[_n.a,en.a,_.j,_.z,[2,pn.a]],null,null),_._24(335544320,40,{contentLabel:0}),_._24(603979776,41,{_buttons:1}),_._24(603979776,42,{_icons:1}),_._8(146,16384,null,0,gn.a,[],null,null),(n()(),_._9(147,0,null,1,2,"ion-label",[["no-margin",""]],null,null,null,null,null)),_._8(148,16384,[[40,4]],0,zn.a,[en.a,_.j,_.z,[8,null],[8,null],[8,null],[8,null]],null,null),(n()(),_._26(-1,null,["Model JSON"])),(n()(),_._9(150,0,null,null,0,"input",[["id","json-upload"],["padding-left",""],["placeholder","Model JSON"],["type","file"]],null,null,null,null,null)),(n()(),_._9(151,0,null,null,8,"ion-item",[["class","item item-block"]],null,null,null,dn.b,dn.a)),_._8(152,1097728,null,3,hn.a,[_n.a,en.a,_.j,_.z,[2,pn.a]],null,null),_._24(335544320,43,{contentLabel:0}),_._24(603979776,44,{_buttons:1}),_._24(603979776,45,{_icons:1}),_._8(156,16384,null,0,gn.a,[],null,null),(n()(),_._9(157,0,null,1,2,"ion-label",[["margin-top",""],["no-margin",""]],null,null,null,null,null)),_._8(158,16384,[[43,4]],0,zn.a,[en.a,_.j,_.z,[8,null],[8,null],[8,null],[8,null]],null,null),(n()(),_._26(-1,null,["Model Weights"])),(n()(),_._9(160,0,null,null,0,"input",[["id","weights-upload"],["padding-left",""],["placeholder","Model Weights"],["type","file"]],null,null,null,null,null)),(n()(),_._9(161,0,null,null,8,"ion-item",[["class","item item-block"]],null,null,null,dn.b,dn.a)),_._8(162,1097728,null,3,hn.a,[_n.a,en.a,_.j,_.z,[2,pn.a]],null,null),_._24(335544320,46,{contentLabel:0}),_._24(603979776,47,{_buttons:1}),_._24(603979776,48,{_icons:1}),_._8(166,16384,null,0,gn.a,[],null,null),(n()(),_._9(167,0,null,1,2,"ion-label",[["margin-top",""],["no-margin",""]],null,null,null,null,null)),_._8(168,16384,[[46,4]],0,zn.a,[en.a,_.j,_.z,[8,null],[8,null],[8,null],[8,null]],null,null),(n()(),_._26(-1,null,["Model Data"])),(n()(),_._9(170,0,null,null,0,"input",[["id","data-upload"],["padding-left",""],["placeholder","Model Data"],["type","file"]],null,null,null,null,null)),(n()(),_._9(171,0,null,null,2,"button",[["full",""],["ion-button",""],["margin-top",""]],null,[[null,"click"]],function(n,l,t){var e=!0;if("click"===l){e=!1!==n.component.onImportModel()&&e}return e},vn.b,vn.a)),_._8(172,1097728,null,0,yn.a,[[8,""],en.a,_.j,_.z],{full:[0,"full"]},null),(n()(),_._26(-1,0,["Import Model"])),(n()(),_._9(174,0,[[3,0],["faceCanvas",1]],null,0,"canvas",[["height","224"],["hidden",""],["id","face-canvas"],["width","224"]],null,null,null,null,null))],function(n,l){var t=l.component;n(l,9,0,"primary");n(l,46,0,t.labelToAdd);n(l,49,0,"New Label");n(l,53,0,"add");n(l,59,0,0===t.objectKeys(t.faceRecognizer.imageStore.data).length);n(l,61,0,t.objectKeys(t.faceRecognizer.imageStore.data).length>0);n(l,63,0,t.objectKeys(t.faceRecognizer.imageStore.data));n(l,65,0,1===t.objectKeys(t.faceRecognizer.imageStore.data).length);n(l,67,0,t.objectKeys(t.faceRecognizer.imageStore.data).length>=2);n(l,69,0,0===t.objectKeys(t.faceRecognizer.imageStore.data).length);n(l,71,0,t.faceRecognizer.imageClassifier.loss);n(l,86,0,t.faceRecognizer.imageClassifier.learningRate);n(l,89,0,"number","0.00001");n(l,100,0,t.faceRecognizer.imageClassifier.hiddenUnits);n(l,103,0,"number");n(l,114,0,t.faceRecognizer.imageClassifier.batchSize);n(l,117,0,"number");n(l,128,0,t.faceRecognizer.imageClassifier.epochs);n(l,131,0,"number");n(l,133,0,"");n(l,136,0,t.faceRecognizer.imageClassifier.headModel);n(l,172,0,"")},function(n,l){var t=l.component;n(l,4,0,_._19(l,5).statusbarPadding,_._19(l,5)._hasRefresher);n(l,8,0,_._19(l,9)._sbPadding);n(l,45,0,_._19(l,48).ngClassUntouched,_._19(l,48).ngClassTouched,_._19(l,48).ngClassPristine,_._19(l,48).ngClassDirty,_._19(l,48).ngClassValid,_._19(l,48).ngClassInvalid,_._19(l,48).ngClassPending);n(l,52,0,_._19(l,53)._hidden);n(l,85,0,_._19(l,88).ngClassUntouched,_._19(l,88).ngClassTouched,_._19(l,88).ngClassPristine,_._19(l,88).ngClassDirty,_._19(l,88).ngClassValid,_._19(l,88).ngClassInvalid,_._19(l,88).ngClassPending);n(l,99,0,_._19(l,102).ngClassUntouched,_._19(l,102).ngClassTouched,_._19(l,102).ngClassPristine,_._19(l,102).ngClassDirty,_._19(l,102).ngClassValid,_._19(l,102).ngClassInvalid,_._19(l,102).ngClassPending);n(l,113,0,_._19(l,116).ngClassUntouched,_._19(l,116).ngClassTouched,_._19(l,116).ngClassPristine,_._19(l,116).ngClassDirty,_._19(l,116).ngClassValid,_._19(l,116).ngClassInvalid,_._19(l,116).ngClassPending);n(l,127,0,_._19(l,130).ngClassUntouched,_._19(l,130).ngClassTouched,_._19(l,130).ngClassPristine,_._19(l,130).ngClassDirty,_._19(l,130).ngClassValid,_._19(l,130).ngClassInvalid,_._19(l,130).ngClassPending);n(l,132,0,t.faceRecognizer.imageClassifier.isTraining||t.objectKeys(t.faceRecognizer.imageStore.data).length<2)})}Object.defineProperty(l,"__esModule",{value:!0});var h=t(60),_=t(1),p=(t(0),t(145),t(126)),g=t(127),b=this&&this.__awaiter||function(n,l,t,e){return new(t||(t=Promise))(function(a,u){function o(n){try{r(e.next(n))}catch(n){u(n)}}function i(n){try{r(e.throw(n))}catch(n){u(n)}}function r(n){n.done?a(n.value):new t(function(l){l(n.value)}).then(o,i)}r((e=e.apply(n,l||[])).next())})},m=this&&this.__generator||function(n,l){function t(t){return function(o){return function(t){if(e)throw new TypeError("Generator is already executing.");for(;i;)try{if(e=1,a&&(u=a[2&t[0]?"return":t[0]?"throw":"next"])&&!(u=u.call(a,t[1])).done)return u;switch(a=0,u&&(t=[0,u.value]),t[0]){case 0:case 1:u=t;break;case 4:return i.label++,{value:t[1],done:!1};case 5:i.label++,a=t[1],t=[0];continue;case 7:t=i.ops.pop(),i.trys.pop();continue;default:if(u=i.trys,!(u=u.length>0&&u[u.length-1])&&(6===t[0]||2===t[0])){i=0;continue}if(3===t[0]&&(!u||t[1]>u[0]&&t[1]<u[3])){i.label=t[1];break}if(6===t[0]&&i.label<u[1]){i.label=u[1],u=t;break}if(u&&i.label<u[2]){i.label=u[2],i.ops.push(t);break}u[2]&&i.ops.pop(),i.trys.pop();continue}t=l.call(n,i)}catch(n){t=[6,n],a=0}finally{e=u=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,o])}}var e,a,u,o,i={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return o={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o},v=function(){function n(){}return n.prototype.init=function(){this.faceDetector=new window.FaceDetector({fastMode:!0})},n.prototype.detect=function(n){return b(this,void 0,void 0,function(){var l;return m(this,function(t){switch(t.label){case 0:return[4,this.faceDetector.detect(n)];case 1:return l=t.sent(),[2,l.map(function(n){return n.boundingBox})]}})})},n.ngInjectableDef=_.M({factory:function(){return new n},token:n,providedIn:"root"}),n}(),y=(t(322),t(323),this&&this.__awaiter||function(n,l,t,e){return new(t||(t=Promise))(function(a,u){function o(n){try{r(e.next(n))}catch(n){u(n)}}function i(n){try{r(e.throw(n))}catch(n){u(n)}}function r(n){n.done?a(n.value):new t(function(l){l(n.value)}).then(o,i)}r((e=e.apply(n,l||[])).next())})}),w=this&&this.__generator||function(n,l){function t(t){return function(o){return function(t){if(e)throw new TypeError("Generator is already executing.");for(;i;)try{if(e=1,a&&(u=a[2&t[0]?"return":t[0]?"throw":"next"])&&!(u=u.call(a,t[1])).done)return u;switch(a=0,u&&(t=[0,u.value]),t[0]){case 0:case 1:u=t;break;case 4:return i.label++,{value:t[1],done:!1};case 5:i.label++,a=t[1],t=[0];continue;case 7:t=i.ops.pop(),i.trys.pop();continue;default:if(u=i.trys,!(u=u.length>0&&u[u.length-1])&&(6===t[0]||2===t[0])){i=0;continue}if(3===t[0]&&(!u||t[1]>u[0]&&t[1]<u[3])){i.label=t[1];break}if(6===t[0]&&i.label<u[1]){i.label=u[1],u=t;break}if(u&&i.label<u[2]){i.label=u[2],i.ops.push(t);break}u[2]&&i.ops.pop(),i.trys.pop();continue}t=l.call(n,i)}catch(n){t=[6,n],a=0}finally{e=u=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,o])}}var e,a,u,o,i={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return o={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o},C=function(){function n(){this.faces=[]}return n.prototype.init=function(){this.tracker=new tracking.ObjectTracker(["face"]),this.tracker.setInitialScale(4),this.tracker.setStepSize(2),this.tracker.setEdgesDensity(.1)},n.prototype.detect=function(n){return y(this,void 0,void 0,function(){return w(this,function(l){return this.isTracking||this.startTracking(n),[2,this.faces]})})},n.prototype.startTracking=function(n){var l=this;this.isTracking=!0,tracking.track(n,this.tracker,{camera:!0}),this.tracker.on("track",function(n){l.faces=n.data})},n.ngInjectableDef=_.M({factory:function(){return new n},token:n,providedIn:"root"}),n}(),z=t(324),j=this&&this.__awaiter||function(n,l,t,e){return new(t||(t=Promise))(function(a,u){function o(n){try{r(e.next(n))}catch(n){u(n)}}function i(n){try{r(e.throw(n))}catch(n){u(n)}}function r(n){n.done?a(n.value):new t(function(l){l(n.value)}).then(o,i)}r((e=e.apply(n,l||[])).next())})},k=this&&this.__generator||function(n,l){function t(t){return function(o){return function(t){if(e)throw new TypeError("Generator is already executing.");for(;i;)try{if(e=1,a&&(u=a[2&t[0]?"return":t[0]?"throw":"next"])&&!(u=u.call(a,t[1])).done)return u;switch(a=0,u&&(t=[0,u.value]),t[0]){case 0:case 1:u=t;break;case 4:return i.label++,{value:t[1],done:!1};case 5:i.label++,a=t[1],t=[0];continue;case 7:t=i.ops.pop(),i.trys.pop();continue;default:if(u=i.trys,!(u=u.length>0&&u[u.length-1])&&(6===t[0]||2===t[0])){i=0;continue}if(3===t[0]&&(!u||t[1]>u[0]&&t[1]<u[3])){i.label=t[1];break}if(6===t[0]&&i.label<u[1]){i.label=u[1],u=t;break}if(u&&i.label<u[2]){i.label=u[2],i.ops.push(t);break}u[2]&&i.ops.pop(),i.trys.pop();continue}t=l.call(n,i)}catch(n){t=[6,n],a=0}finally{e=u=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,o])}}var e,a,u,o,i={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return o={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o},I=function(){function n(){this.learningRate=1e-5,this.hiddenUnits=100,this.epochs=20,this.batchSize=10,this.loss=0,this.init()}return n.prototype.init=function(){return j(this,void 0,void 0,function(){var n;return k(this,function(l){switch(l.label){case 0:return n=this,[4,this.loadMobilenet()];case 1:return n.mobilenet=l.sent(),[2]}})})},n.prototype.loadMobilenet=function(){return j(this,void 0,void 0,function(){var n,l;return k(this,function(t){switch(t.label){case 0:return[4,z.e("https://storage.googleapis.com/tfjs-models/tfjs/mobilenet_v1_0.25_224/model.json")];case 1:return n=t.sent(),l=n.getLayer("conv_pw_13_relu"),[2,z.f({inputs:n.inputs,outputs:l.output})]}})})},n.prototype.predictMobilenet=function(n){var l=this.imageDataToTensor(n);return this.mobilenet.predict(l)},n.prototype.imageDataToTensor=function(n){return z.l(function(){return z.a(n).expandDims(0).toFloat().div(z.i(127)).sub(z.i(1))})},n.prototype.trainModel=function(n){var l=this;this.isTraining=!0;var t=this.dataToDataset(n);this.labels=t.labels;var e=this.createHeadModel(this.labels.length),a=z.m.adam(this.learningRate);e.compile({optimizer:a,loss:"categoricalCrossentropy"});return e.fit(t.xs,t.ys,{batchSize:this.batchSize,epochs:this.epochs,callbacks:{onBatchEnd:function(n,t){return j(l,void 0,void 0,function(){return k(this,function(n){switch(n.label){case 0:return this.loss=t.loss,[4,z.g()];case 1:return n.sent(),[2]}})})},onTrainEnd:function(){l.headModel=e,l.isTraining=!1}}})},n.prototype.dataToDataset=function(n){var l,t,e=this,a=Object.keys(n);return a.forEach(function(u,o){n[u].forEach(function(i,r){var c=z.l(function(){return z.h(z.k([o]).toInt(),a.length)}),s=e.predictMobilenet(i);if(l){var f=l;l=z.c(f.concat(c,0));var d=t;t=z.c(d.concat(s,0)),f.dispose(),d.dispose()}else l=z.c(c),t=z.c(s);console.log(r,"-",n[u].length)})}),{labels:a,xs:t,ys:l}},n.prototype.createHeadModel=function(n){return z.j({layers:[z.d.flatten({inputShape:[7,7,256]}),z.d.dense({units:this.hiddenUnits,activation:"relu",kernelInitializer:"varianceScaling",useBias:!0}),z.d.dense({units:n,kernelInitializer:"varianceScaling",useBias:!1,activation:"softmax"})]})},n.prototype.loadHeadModel=function(n,l){return j(this,void 0,void 0,function(){var t;return k(this,function(e){switch(e.label){case 0:return t=this,[4,z.e(z.b.browserFiles([n,l]))];case 1:return t.headModel=e.sent(),[2]}})})},n.prototype.saveHeadModel=function(){this.headModel.save("downloads://model")},n.prototype.predict=function(n){return j(this,void 0,void 0,function(){var l,t,e,a,u;return k(this,function(o){switch(o.label){case 0:return this.headModel?(l=this.imageDataToTensor(n),t=this.mobilenet.predict(l),e=this.headModel.predict(t),[4,e.as1D().argMax().data()]):[2,"????"];case 1:return a=o.sent(),[4,e.as1D().max().data()];case 2:return u=o.sent(),[2,this.labels[a[0]]+": "+Math.floor(100*u[0])+"%"]}})})},n.ngInjectableDef=_.M({factory:function(){return new n},token:n,providedIn:"root"}),n}(),x=function(){function n(){this.data={}}return n.prototype.hasLabel=function(n){return void 0!==this.data[n]},n.prototype.addLabel=function(n){if(!n||this.data[n])throw new Error("Label "+n+" already exists");this.data[n]=[]},n.prototype.getLabels=function(){return Object.keys(this.data)},n.prototype.storeImage=function(n,l,t){this.data[n].push({imageData:l,base64:t})},n.prototype.getDataAsImageData=function(){var n=this;return Object.keys(this.data).reduce(function(l,t){return l[t]=n.data[t].map(function(n){return n.imageData}),l},{})},n.ngInjectableDef=_.M({factory:function(){return new n},token:n,providedIn:"root"}),n}(),D=t(369),M=t(422),E=this&&this.__awaiter||function(n,l,t,e){return new(t||(t=Promise))(function(a,u){function o(n){try{r(e.next(n))}catch(n){u(n)}}function i(n){try{r(e.throw(n))}catch(n){u(n)}}function r(n){n.done?a(n.value):new t(function(l){l(n.value)}).then(o,i)}r((e=e.apply(n,l||[])).next())})},F=this&&this.__generator||function(n,l){function t(t){return function(o){return function(t){if(e)throw new TypeError("Generator is already executing.");for(;i;)try{if(e=1,a&&(u=a[2&t[0]?"return":t[0]?"throw":"next"])&&!(u=u.call(a,t[1])).done)return u;switch(a=0,u&&(t=[0,u.value]),t[0]){case 0:case 1:u=t;break;case 4:return i.label++,{value:t[1],done:!1};case 5:i.label++,a=t[1],t=[0];continue;case 7:t=i.ops.pop(),i.trys.pop();continue;default:if(u=i.trys,!(u=u.length>0&&u[u.length-1])&&(6===t[0]||2===t[0])){i=0;continue}if(3===t[0]&&(!u||t[1]>u[0]&&t[1]<u[3])){i.label=t[1];break}if(6===t[0]&&i.label<u[1]){i.label=u[1],u=t;break}if(u&&i.label<u[2]){i.label=u[2],i.ops.push(t);break}u[2]&&i.ops.pop(),i.trys.pop();continue}t=l.call(n,i)}catch(n){t=[6,n],a=0}finally{e=u=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,o])}}var e,a,u,o,i={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return o={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o},R=function(){function n(){}return n.prototype.downloadDataAsZIP=function(n){return E(this,void 0,void 0,function(){var l,t;return F(this,function(e){switch(e.label){case 0:return l=new D,Object.keys(n).forEach(function(t){var e=l.folder(t);n[t].forEach(function(n,l){e.file(t+"-"+l+".jpeg",n.base64,{base64:!0})})}),[4,l.generateAsync({type:"blob"})];case 1:return t=e.sent(),Object(M.saveAs)(t,"model-data.zip"),[2]}})})},n.prototype.loadDataFromZIP=function(n){return E(this,void 0,void 0,function(){var l,t,e,a,u,o,i,r,c;return F(this,function(s){switch(s.label){case 0:return[4,D.loadAsync(n)];case 1:l=s.sent(),t={},a=0,u=Object.keys(l.files),s.label=2;case 2:return a<u.length?(o=u[a],console.log(o),"jpeg"!==o.split(".").pop()?(e=o.replace("/",""),t[e]=[],[3,5]):(i=l.files[o],[4,i.async("base64").catch(console.log)])):[3,6];case 3:return r=s.sent(),[4,this.base64ToImageData(r).catch(console.log)];case 4:c=s.sent(),t[e].push({imageData:c,base64:r}),s.label=5;case 5:return a++,[3,2];case 6:return[2,t]}})})},n.prototype.base64ToImageData=function(n){return new Promise(function(l){var t=new Image;t.onload=function(){var n=document.createElement("canvas");n.width=t.width,n.height=t.height;var e=n.getContext("2d");e.drawImage(t,0,0);var a=e.getImageData(0,0,n.width,n.height);l(a)},t.src="data:image/jpeg;base64,"+n})},n.ngInjectableDef=_.M({factory:function(){return new n},token:n,providedIn:"root"}),n}(),S=this&&this.__awaiter||function(n,l,t,e){return new(t||(t=Promise))(function(a,u){function o(n){try{r(e.next(n))}catch(n){u(n)}}function i(n){try{r(e.throw(n))}catch(n){u(n)}}function r(n){n.done?a(n.value):new t(function(l){l(n.value)}).then(o,i)}r((e=e.apply(n,l||[])).next())})},T=this&&this.__generator||function(n,l){function t(t){return function(o){return function(t){if(e)throw new TypeError("Generator is already executing.");for(;i;)try{if(e=1,a&&(u=a[2&t[0]?"return":t[0]?"throw":"next"])&&!(u=u.call(a,t[1])).done)return u;switch(a=0,u&&(t=[0,u.value]),t[0]){case 0:case 1:u=t;break;case 4:return i.label++,{value:t[1],done:!1};case 5:i.label++,a=t[1],t=[0];continue;case 7:t=i.ops.pop(),i.trys.pop();continue;default:if(u=i.trys,!(u=u.length>0&&u[u.length-1])&&(6===t[0]||2===t[0])){i=0;continue}if(3===t[0]&&(!u||t[1]>u[0]&&t[1]<u[3])){i.label=t[1];break}if(6===t[0]&&i.label<u[1]){i.label=u[1],u=t;break}if(u&&i.label<u[2]){i.label=u[2],i.ops.push(t);break}u[2]&&i.ops.pop(),i.trys.pop();continue}t=l.call(n,i)}catch(n){t=[6,n],a=0}finally{e=u=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,o])}}var e,a,u,o,i={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return o={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o},P=function(){function n(n,l,t,e,a){this.imageClassifier=t,this.imageStore=e,this.imageLoader=a;try{n.init(),this.faceDetector=n}catch(n){l.init(),this.faceDetector=l}}return n.prototype.detectFaces=function(n){return S(this,void 0,void 0,function(){var l;return T(this,function(t){switch(t.label){case 0:return[4,this.faceDetector.detect(n)];case 1:return l=t.sent(),[2,l]}})})},n.prototype.addLabel=function(n){n&&!this.imageStore.hasLabel(n)&&this.imageStore.addLabel(n)},n.prototype.storeImage=function(n,l,t){var e=t.split(",").pop();this.imageStore.storeImage(n,l,e)},n.prototype.predict=function(n){return S(this,void 0,void 0,function(){return T(this,function(l){switch(l.label){case 0:return[4,this.imageClassifier.predict(n)];case 1:return[2,l.sent()]}})})},n.prototype.trainModel=function(){return this.imageClassifier.trainModel(this.imageStore.getDataAsImageData())},n.prototype.saveModel=function(){this.imageClassifier.saveHeadModel()},n.prototype.loadModel=function(n,l){return S(this,void 0,void 0,function(){return T(this,function(t){return this.imageClassifier.labels=Object.keys(this.imageStore.data),this.imageClassifier.loadHeadModel(n,l),[2]})})},n.prototype.loadDataFromZIP=function(n){return S(this,void 0,void 0,function(){var l;return T(this,function(t){switch(t.label){case 0:return l=this.imageStore,[4,this.imageLoader.loadDataFromZIP(n)];case 1:return l.data=t.sent(),[2]}})})},n.prototype.downloadDataAsZIP=function(){this.imageLoader.downloadDataAsZIP(this.imageStore.data)},n.ngInjectableDef=_.M({factory:function(){return new n(_.Q(v),_.Q(C),_.Q(I),_.Q(x),_.Q(R))},token:n,providedIn:"root"}),n}(),L=this&&this.__awaiter||function(n,l,t,e){return new(t||(t=Promise))(function(a,u){function o(n){try{r(e.next(n))}catch(n){u(n)}}function i(n){try{r(e.throw(n))}catch(n){u(n)}}function r(n){n.done?a(n.value):new t(function(l){l(n.value)}).then(o,i)}r((e=e.apply(n,l||[])).next())})},A=this&&this.__generator||function(n,l){function t(t){return function(o){return function(t){if(e)throw new TypeError("Generator is already executing.");for(;i;)try{if(e=1,a&&(u=a[2&t[0]?"return":t[0]?"throw":"next"])&&!(u=u.call(a,t[1])).done)return u;switch(a=0,u&&(t=[0,u.value]),t[0]){case 0:case 1:u=t;break;case 4:return i.label++,{value:t[1],done:!1};case 5:i.label++,a=t[1],t=[0];continue;case 7:t=i.ops.pop(),i.trys.pop();continue;default:if(u=i.trys,!(u=u.length>0&&u[u.length-1])&&(6===t[0]||2===t[0])){i=0;continue}if(3===t[0]&&(!u||t[1]>u[0]&&t[1]<u[3])){i.label=t[1];break}if(6===t[0]&&i.label<u[1]){i.label=u[1],u=t;break}if(u&&i.label<u[2]){i.label=u[2],i.ops.push(t);break}u[2]&&i.ops.pop(),i.trys.pop();continue}t=l.call(n,i)}catch(n){t=[6,n],a=0}finally{e=u=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,o])}}var e,a,u,o,i={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return o={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o},O=function(){function n(n,l){this.loadingCtrl=n,this.faceRecognizer=l,this.objectKeys=Object.keys}return n.prototype.ionViewDidEnter=function(){return L(this,void 0,void 0,function(){var n=this;return A(this,function(l){switch(l.label){case 0:return this.videoElement=this.video.nativeElement,this.canvasElement=this.canvas.nativeElement,this.faceCanvasElement=this.faceCanvas.nativeElement,this.faceCanvasContext=this.faceCanvasElement.getContext("2d"),[4,this.startWebcam()];case 1:return l.sent(),[4,this.startFaceDetection()];case 2:return l.sent(),window.onresize=function(){return n.resizeCanvas()},[2]}})})},n.prototype.startWebcam=function(){var n=this;return new Promise(function(l,t){return function(l,t){navigator.getUserMedia({video:!0},function(t){n.videoElement.srcObject=t,n.videoElement.onloadeddata=function(){n.resizeCanvas(),l()}},function(n){return t(n)})}(l,t)})},n.prototype.startFaceDetection=function(){var n=this;this.faceDetectionInterval=setInterval(function(){return L(n,void 0,void 0,function(){var n,l=this;return A(this,function(t){switch(t.label){case 0:return[4,this.faceRecognizer.detectFaces(this.videoElement)];case 1:return n=t.sent(),this.firstFace=n[0],this.clearCanvas(),n.forEach(function(n,t){return L(l,void 0,void 0,function(){return A(this,function(l){switch(l.label){case 0:return[4,this.drawFace(n,t)];case 1:return[2,l.sent()]}})})}),[2]}})})},100)},n.prototype.clearCanvas=function(){this.canvasContext.clearRect(0,0,this.canvasElement.width,this.canvasElement.height)},n.prototype.drawFace=function(n,l){return L(this,void 0,void 0,function(){var t,e,a;return A(this,function(u){switch(u.label){case 0:return this.drawInFaceCanvas(n),t=this.getFaceCanvasImageData(),e=0===l?"#0000FF":"#00FF00",[4,this.faceRecognizer.predict(t)];case 1:return a=u.sent(),this.drawFaceRectangle(n,a,e),[2]}})})},n.prototype.drawFaceRectangle=function(n,l,t){var e=n.width,a=n.height,u=n.x,o=n.y;this.canvasContext.strokeStyle=t,this.canvasContext.fillStyle=t,this.canvasContext.font="14px Arial",this.canvasContext.lineWidth=2,this.canvasContext.strokeRect(u,o,e,a),this.canvasContext.fillText(l,u+5,o-10)},n.prototype.resizeCanvas=function(){this.canvasElement.width=this.videoElement.videoWidth,this.canvasElement.height=this.videoElement.videoHeight,this.canvasElement.style.width=this.videoElement.clientWidth+"px",this.canvasElement.style.height=this.videoElement.clientHeight+"px",this.canvasContext=this.canvasElement.getContext("2d")},n.prototype.onAddLabel=function(n){this.faceRecognizer.addLabel(n),this.labelToAdd=""},n.prototype.onAddPicture=function(n){if(this.firstFace){this.drawInFaceCanvas(this.firstFace);var l=this.getFaceCanvasImageData(),t=this.getFaceCanvasDataURL();this.faceRecognizer.storeImage(n,l,t)}},n.prototype.drawInFaceCanvas=function(n){this.faceCanvasContext.drawImage(this.videoElement,n.x,n.y,n.width,n.height,0,0,this.faceCanvasElement.width,this.faceCanvasElement.height)},n.prototype.getFaceCanvasImageData=function(){return this.faceCanvasContext.getImageData(0,0,this.faceCanvasElement.width,this.faceCanvasElement.height)},n.prototype.getFaceCanvasDataURL=function(){return this.faceCanvasElement.toDataURL("image/jpeg")},n.prototype.onExportData=function(){return L(this,void 0,void 0,function(){return A(this,function(n){return this.faceRecognizer.downloadDataAsZIP(),[2]})})},n.prototype.onImportData=function(){return L(this,void 0,void 0,function(){var n,l;return A(this,function(t){switch(t.label){case 0:return n=this.loadingCtrl.create({content:"Importing Data..."}),[4,n.present()];case 1:return t.sent(),l=document.getElementById("data-import"),[4,this.faceRecognizer.loadDataFromZIP(l.files[0])];case 2:return t.sent(),n.dismiss(),[2]}})})},n.prototype.onTrainModel=function(){return L(this,void 0,void 0,function(){return A(this,function(n){switch(n.label){case 0:return clearInterval(this.faceDetectionInterval),[4,this.faceRecognizer.trainModel()];case 1:return n.sent(),this.startFaceDetection(),[2]}})})},n.prototype.onExportModel=function(){return L(this,void 0,void 0,function(){return A(this,function(n){switch(n.label){case 0:return[4,this.faceRecognizer.saveModel()];case 1:return n.sent(),this.faceRecognizer.downloadDataAsZIP(),[2]}})})},n.prototype.onImportModel=function(){return L(this,void 0,void 0,function(){var n,l,t;return A(this,function(e){switch(e.label){case 0:return n=document.getElementById("json-upload"),l=document.getElementById("weights-upload"),t=document.getElementById("data-upload"),[4,this.faceRecognizer.loadDataFromZIP(t.files[0])];case 1:return e.sent(),[4,this.faceRecognizer.loadModel(n.files[0],l.files[0])];case 2:return e.sent(),[2]}})})},n}(),U=function(){return function(n,l,t){this.rootPage=O,n.ready().then(function(){l.styleDefault(),t.hide()})}}(),B=function(){return function(){}}(),G=t(89),H=t(423),Z=t(424),W=t(425),K=t(426),V=t(427),N=t(428),Q=t(429),q=t(430),J=t(431),$=t(432),Y=t(63),X=t(93),nn=t(8),ln=t(39),tn=t(15),en=t(2),an=t(5),un=t(12),on=t(53),rn=t(26),cn=t(16),sn=_._7({encapsulation:2,styles:[],data:{}}),fn=_._5("ng-component",U,function(n){return _._28(0,[(n()(),_._9(0,0,null,null,1,"ng-component",[],null,null,null,e,sn)),_._8(1,49152,null,0,U,[an.a,g.a,p.a],null,null)],null,null)},{},{},[]),dn=t(312),hn=t(28),_n=t(23),pn=t(76),gn=t(114),bn=t(175),mn=t(74),vn=t(70),yn=t(33),wn=t(152),Cn=t(153),zn=t(75),jn=t(21),kn=t(433),In=t(40),xn=t(55),Dn=t(434),Mn=t(65),En=t(435),Fn=t(125),Rn=t(64),Sn=t(156),Tn=t(157),Pn=t(155),Ln=t(436),An=t(27),On=t(113),Un=t(118),Bn=_._7({encapsulation:2,styles:[],data:{}}),Gn=_._5("page-home",O,function(n){return _._28(0,[(n()(),_._9(0,0,null,null,1,"page-home",[],null,null,null,d,Bn)),_._8(1,49152,null,0,O,[Un.a,P],null,null)],null,null)},{},{},[]),Hn=t(183),Zn=t(149),Wn=t(151),Kn=t(180),Vn=t(56),Nn=t(272),Qn=t(91),qn=t(77),Jn=t(162),$n=t(110),Yn=t(167),Xn=t(179),nl=t(174),ll=t(271),tl=t(181),el=t(51),al=t(161),ul=t(182),ol=_._6(B,[G.b],function(n){return _._16([_._17(512,_.i,_.V,[[8,[H.a,Z.a,W.a,K.a,V.a,N.a,Q.a,q.a,J.a,fn,Gn]],[3,_.i],_.s]),_._17(5120,_.r,_._4,[[3,_.r]]),_._17(4608,jn.l,jn.k,[_.r,[2,jn.u]]),_._17(5120,_.b,_._1,[]),_._17(5120,_.p,_._2,[]),_._17(5120,_.q,_._3,[]),_._17(4608,h.c,h.q,[jn.c]),_._17(6144,_.D,null,[h.c]),_._17(4608,h.f,Hn.a,[]),_._17(5120,h.d,function(n,l,t,e,a,u,o){return[new h.k(n,l,t),new h.o(e),new h.n(a,u,o)]},[jn.c,_.u,[2,_.w],jn.c,jn.c,h.f,_.W]),_._17(4608,h.e,h.e,[h.d,_.u]),_._17(135680,h.m,h.m,[jn.c]),_._17(4608,h.l,h.l,[h.e,h.m]),_._17(6144,_.B,null,[h.l]),_._17(6144,h.p,null,[h.m]),_._17(4608,_.G,_.G,[_.u]),_._17(4608,h.h,h.h,[jn.c]),_._17(4608,h.i,h.i,[jn.c]),_._17(4608,An.k,An.k,[]),_._17(4608,An.c,An.c,[]),_._17(4608,Zn.a,Zn.a,[tn.a,en.a]),_._17(4608,Wn.a,Wn.a,[tn.a,en.a]),_._17(4608,Kn.a,Kn.a,[]),_._17(4608,_n.a,_n.a,[]),_._17(4608,Vn.a,Vn.a,[an.a]),_._17(4608,xn.a,xn.a,[en.a,an.a,_.u,cn.a]),_._17(4608,Un.a,Un.a,[tn.a,en.a]),_._17(5120,jn.g,Nn.b,[jn.r,[2,jn.a],en.a]),_._17(4608,jn.f,jn.f,[jn.g]),_._17(5120,Qn.b,Qn.d,[tn.a,Qn.a]),_._17(5120,rn.a,rn.b,[tn.a,Qn.b,jn.f,qn.b,_.i]),_._17(4608,Jn.a,Jn.a,[tn.a,en.a,rn.a]),_._17(4608,$n.a,$n.a,[tn.a,en.a]),_._17(4608,Yn.a,Yn.a,[tn.a,en.a,rn.a]),_._17(4608,Xn.a,Xn.a,[en.a,an.a,cn.a,tn.a,un.l]),_._17(4608,nl.a,nl.a,[tn.a,en.a]),_._17(4608,on.a,on.a,[an.a,en.a]),_._17(4608,g.a,g.a,[]),_._17(4608,p.a,p.a,[]),_._17(1073742336,jn.b,jn.b,[]),_._17(512,_.k,ll.a,[]),_._17(256,en.b,{},[]),_._17(1024,tl.a,tl.b,[]),_._17(1024,an.a,an.b,[h.b,tl.a,_.u]),_._17(1024,en.a,en.c,[en.b,an.a]),_._17(512,cn.a,cn.a,[an.a]),_._17(512,el.a,el.a,[]),_._17(512,tn.a,tn.a,[en.a,an.a,[2,el.a]]),_._17(512,un.l,un.l,[tn.a]),_._17(256,Qn.a,{links:[]},[]),_._17(512,_.h,_.h,[]),_._17(512,al.a,al.a,[_.h]),_._17(1024,qn.b,qn.c,[al.a,_.o]),_._17(1024,_.c,function(n,l,t,e,a,u,o,i,r,c,s,f,d){return[h.r(n),ul.a(l),Kn.b(t,e),Xn.b(a,u,o,i,r),qn.d(c,s,f,d)]},[[2,_.t],en.a,an.a,cn.a,en.a,an.a,cn.a,tn.a,un.l,en.a,Qn.a,qn.b,_.u]),_._17(512,_.d,_.d,[[2,_.c]]),_._17(131584,_.f,_.f,[_.u,_.W,_.o,_.k,_.i,_.d]),_._17(1073742336,_.e,_.e,[_.f]),_._17(1073742336,h.a,h.a,[[3,h.a]]),_._17(1073742336,An.j,An.j,[]),_._17(1073742336,An.d,An.d,[]),_._17(1073742336,An.i,An.i,[]),_._17(1073742336,Nn.a,Nn.a,[]),_._17(1073742336,B,B,[]),_._17(256,_.U,!0,[]),_._17(256,G.a,U,[]),_._17(256,jn.a,"/",[])])});Object(_.N)(),Object(h.j)().bootstrapModuleFactory(ol)},334:function(n,l){},374:function(n,l){},376:function(n,l){}},[313]);